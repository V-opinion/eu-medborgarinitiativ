"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3210],{63210:function(t,e,r){r.d(e,{Z:function(){return it}});var o=r(59499),i=r(4730),n=r(88975),a=r(66230),c=r(28765),l=r(50029),s=r(64687),p=r.n(s),d=r(45626),u=r(19641),b=r(18441),w=r(79478),g=r(7404),m=r(27205),f=r(95438),y=r(41827),h=r(27484),v=r.n(h),x=r(67294),k=r(49770),Z=r(35617),O=r(58048),j=r(35944);function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var z={name:"zbmirx",styles:"overflow:hidden;border-radius:0.5rem;border-width:1px;--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);.dark &{border-color:rgb(39 39 42 / 0.8);--tw-bg-opacity:1;background-color:rgb(9 9 11 / var(--tw-bg-opacity));}"},I=function(t){var e=t.children,r=t.floatingProps;return(0,j.tZ)("div",S(S({},r),{},{children:(0,j.tZ)("div",{css:z,children:e})}))},E=function(){var t=(0,l.Z)(p().mark((function t(e){var r,o,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new g.Z(e,{}),t.next=3,o.exec();case 3:return t.next=5,null===(r=o.rawResponse)||void 0===r?void 0:r.json();case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C={name:"1xpc7k4",styles:"width:18rem;padding:1rem;:focus{outline:2px solid transparent;outline-offset:2px;}"},F={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},B={name:"4567i0",styles:"position:relative;height:5rem;width:5rem;border-radius:9999px;border-width:1px;--tw-bg-opacity:1;background-color:rgb(244 244 245 / var(--tw-bg-opacity));.dark &{--tw-border-opacity:1;border-color:rgb(39 39 42 / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgb(39 39 42 / var(--tw-bg-opacity));}"},D={name:"q7vwpz",styles:"z-index:20;border-radius:9999px"},N={name:"i5s9dy",styles:"padding-left:0.75rem;padding-right:0.75rem;padding-top:0.375rem;padding-bottom:0.375rem;font-size:0.875rem;line-height:1.25rem"},U={name:"1fuh9hb",styles:"margin-right:0.5rem;height:1rem;width:1rem;fill:currentColor"},X={name:"1fuh9hb",styles:"margin-right:0.5rem;height:1rem;width:1rem;fill:currentColor"},_={name:"1xn6gi",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(244 244 245 / var(--tw-bg-opacity));padding-top:1rem;padding-bottom:1rem;padding-left:2.75rem;padding-right:2.75rem;.dark &{--tw-bg-opacity:1;background-color:rgb(39 39 42 / var(--tw-bg-opacity));}"},A={name:"f8jhwt",styles:"margin-top:0.5rem;flex:1 1 0%"},M={name:"1t9opgp",styles:'margin-bottom:0.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1.25rem;line-height:1.75rem;font-weight:700;--tw-text-opacity:1;color:rgb(24 24 27 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));}'},R={name:"l10529",styles:"margin-bottom:0.5rem;--tw-text-opacity:1;color:rgb(24 24 27 / var(--tw-text-opacity));word-break:normal;overflow-wrap:anywhere;.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}"},Y={name:"lw04sf",styles:"margin-top:0.5rem;display:flex;flex:1 1 0%;flex-direction:row;align-items:center;font-size:0.875rem;line-height:1.25rem"},V={name:"fhxb3m",styles:"display:flex;flex-direction:row;align-items:center"},L={name:"9ztvcg",styles:"margin-right:0.25rem;--tw-text-opacity:1;color:rgb(24 24 27 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));}"},q={name:"1c1sw1l",styles:"--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}"},H={name:"94vz98",styles:"margin-top:0.5rem;display:flex;flex-direction:row;align-items:center;font-size:0.875rem;line-height:1.25rem;font-weight:700;--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity))"},J={name:"1h52dri",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap"},T={name:"q4anso",styles:"margin-top:0.5rem;display:block;border-radius:0.5rem;--tw-bg-opacity:1;background-color:rgb(244 244 245 / var(--tw-bg-opacity));padding:0.75rem;.dark &{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}"},G={name:"iszni2",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:600;.dark &{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));}"},K={name:"1pe706h",styles:"margin-top:0.25rem;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(244 244 245 / var(--tw-text-opacity));}"},Q={name:"4e3cdl",styles:"margin-right:1rem;display:inline-block;font-size:0.75rem;line-height:1rem;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}"},W={name:"p3z88p",styles:'font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:0.875rem;line-height:1.25rem;font-weight:700;word-break:normal;overflow-wrap:anywhere'},$=(0,x.forwardRef)((function(t,e){var r=t.publicationId,o=t.currentUser,i=(0,k.Z)("/api/publication/publication-sheet?publicationId=".concat(r),E),n=i.data,a=i.isValidating,c=(0,x.useRef)(null);(0,x.useEffect)((function(){var t;n&&(null===(t=c.current)||void 0===t||t.focus({preventScroll:!0}))}),[n]);var s=(0,k.Z)(!a&&null!==n&&void 0!==n&&n._id&&o?"/ajax/publication/".concat(n._id,"/follow-state"):null,E),h=s.data,P=s.mutate,z=s.isValidating,$=null===h||void 0===h?void 0:h.publication,tt=(0,x.useState)(!0),et=tt[0],rt=tt[1],ot=(0,w.Z)({placement:"bottom",triggerRef:e,isVisible:et,offset:{mainAxis:15},onVisibilityChange:function(){return rt(!0)},hasArrow:!1}).getPopoverProps,it=function(){var t=(0,l.Z)(p().mark((function t(e){var r,i,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=3;break}return window.location.href="/onboard?next=".concat(window.location.pathname),t.abrupt("return");case 3:return"/ajax/publication/follow",i=new g.Z("/ajax/publication/follow",{method:"POST",credentials:"same-origin",body:JSON.stringify({publicationId:e})}),n=S(S({},h),{},{publication:{beingFollowed:!(null!==h&&void 0!==h&&null!==(r=h.publication)&&void 0!==r&&r.beingFollowed)}}),P(n,!1),t.next=9,i.exec();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(!n)return null;var nt=(0,O.lL)(n),at=(0,O.Z8)(n),ct={href:nt,target:"_blank",rel:"noopener"};return(0,j.tZ)(I,S(S({},ot()),{},{children:(0,j.BX)("div",{ref:c,tabIndex:0,css:C,children:[(0,j.BX)("div",{css:F,children:[(0,j.tZ)("a",S(S({css:B},ct),{},{children:(0,j.tZ)(Z.Z,{originalSrc:n.favicon||m.Y9,alt:n.title,src:(0,f.resizeImage)(n.favicon,{w:150,h:150,c:"face"},m.Y9,!1),css:D,layout:"fill",objectFit:"contain"})})),z?(0,j.tZ)("div",{css:_}):(0,j.BX)(d.Z,{type:"button",variant:null!==$&&void 0!==$&&$.beingFollowed?"primary-outline":"primary",onClick:function(){return it(n._id)},css:N,children:[null!==$&&void 0!==$&&$.beingFollowed?(0,j.tZ)(u.Z,{css:U}):(0,j.tZ)(b.Z,{css:X}),(0,j.BX)("span",{children:["Follow",null!==$&&void 0!==$&&$.beingFollowed?"ing":""]})]})]}),(0,j.BX)("div",{css:A,children:[n.title&&(0,j.tZ)("h1",{css:M,children:(0,j.tZ)("a",S(S({},ct),{},{children:n.title}))}),n.description&&(0,j.tZ)("p",{css:R,children:n.description}),n.numFollowers>=0&&(0,j.tZ)("div",{css:Y,children:(0,j.BX)("a",S(S({},ct),{},{css:V,children:[(0,j.tZ)("strong",{css:L,children:(0,y.sy)(n.numFollowers)}),(0,j.tZ)("span",{css:q,children:n.numFollowers>1?"followers":"follower"})]}))}),(0,j.tZ)("a",S(S({},ct),{},{css:H,children:(0,j.tZ)("span",{css:J,children:at})}))]}),n.latestPost&&(0,j.BX)("a",{href:(0,O.U_)(n.latestPost,n),css:T,children:[(0,j.tZ)("p",{css:G,children:"Latest Article \u2728"}),(0,j.BX)("div",{css:K,children:[(0,j.tZ)("span",{css:Q,children:v()(n.latestPost.dateAdded).format("D MMM, YYYY")}),(0,j.BX)("span",{css:W,children:[n.latestPost.title.substring(0,75),n.latestPost.title.length>75?"\u2026":""]})]})]})]})}))})),tt=$,et=["publicationId","children"];function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t){var e=t.publicationId,r=t.children,o=(0,i.Z)(t,et),l=(0,c.Z)().width,s=(0,a.Z)().data,p=(0,x.useRef)(null),d=(0,n.v)(),u=d.showCommonPopover,b=d.hideCommonPopover,w=l>1024&&e,g=w?{onMouseEnter:function(){e&&u((0,j.tZ)(tt,{currentUser:s,publicationId:e,ref:p}))},onMouseLeave:b}:{};return(0,j.tZ)("div",ot(ot(ot({ref:p,css:["height:100%;width:100%;",w&&{":hover":{cursor:"pointer",opacity:"0.8"}},"",""]},g),o),{},{children:r}))}}}]);