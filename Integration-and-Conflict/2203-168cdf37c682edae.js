"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2203],{83402:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(92777),o=r(82262),i=r(81531),a=r(63553),s=r(37247),c=r(67294),l=r(35944);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);if(t){var o=(0,s.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.Z)(this,r)}}var d=function(e){(0,i.Z)(r,e);var t=u(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,l.tZ)("svg",{className:this.props.className,css:this.props.css||"",viewBox:"0 0 512 512",children:(0,l.tZ)("path",{d:"M493.255 56.236l-37.49-37.49c-24.993-24.993-65.515-24.994-90.51 0L12.838 371.162.151 485.346c-1.698 15.286 11.22 28.203 26.504 26.504l114.184-12.687 352.417-352.417c24.992-24.994 24.992-65.517-.001-90.51zm-95.196 140.45L174 420.745V386h-48v-48H91.255l224.059-224.059 82.745 82.745zM126.147 468.598l-58.995 6.555-30.305-30.305 6.555-58.995L63.255 366H98v48h48v34.745l-19.853 19.853zm344.48-344.48l-49.941 49.941-82.745-82.745 49.941-49.941c12.505-12.505 32.748-12.507 45.255 0l37.49 37.49c12.506 12.506 12.507 32.747 0 45.255z"})})}}]),r}(c.Component)},61411:function(e,t,r){r.d(t,{F:function(){return n}});r(67294);function n(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}},61838:function(e,t,r){var n=r(67294),o=r(11163),i=r.n(o),a=r(60999);t.Z=function(e){var t=e.isConfirm,r=void 0===t||t,o=e.message,s=void 0===o?"Leave this page? Changes that you made may not be saved.":o,c=e.cancelHandler;(0,a.Z)(r,s),(0,n.useEffect)((function(){var e=function(){if(r&&!window.confirm(s))throw"function"===typeof c&&c(),"Routing is prevented"};return i().events.on("beforeHistoryChange",e),function(){i().events.off("beforeHistoryChange",e)}}),[r,s])}},55191:function(e,t,r){r.d(t,{Z:function(){return zr}});var n=r(59499),o=r(35617),i=r(50029),a=r(64687),s=r.n(a),c=r(67294),l=r(7404),u=r(66230),d=r(11163),p=r(82184),m=r(89613),f=r(44160),h=r(41507),b=r(35944),y=function(){var e=(0,i.Z)(s().mark((function e(t){var r,n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new l.Z("/ajax/collections/add-or-remove-post",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}),e.next=4,n.exec();case 4:return e.next=6,null===(r=n.rawResponse)||void 0===r?void 0:r.json();case 6:if(!(o=e.sent).bookmark||"SAVED"!==o.bookmark.bookmarkType){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 12:return e.prev=12,e.t0=e.catch(0),(0,f.C)("error","Unable to bookmark post"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();var w=function(e){var t=e.post,r=(0,u.Z)(),n=r.data,o=r.isValidating,a=(0,d.useRouter)(),f=(0,c.useRef)(!1),w=(0,p.Z)("bookmarks-token",(new Date).getTime())[1],g=(0,c.useState)(!0),v=g[0],x=g[1],k=!1;t.bookmarkedIn&&t.bookmarkedIn.length>0&&(k=-1!==t.bookmarkedIn.indexOf("SAVED"));var O=(0,c.useState)(k),I=O[0],C=O[1],S=function(){var e=(0,i.Z)(s().mark((function e(t){var r,n,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/post/bookmark-status?postId=".concat(t),o=new l.Z(n,{credentials:"same-origin"}),e.next=4,o.exec();case 4:return e.next=6,null===(r=o.rawResponse)||void 0===r?void 0:r.json();case 6:return i=e.sent,e.abrupt("return",i.bookmarkedIn);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=!0;if(!o){if(!n||"/bookmarks"===a.asPath)return void x(!1);f.current||(f.current=!0,(0,i.Z)(s().mark((function r(){var n;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,S(t._id.toString());case 4:n=r.sent,e&&C(-1!==n.indexOf("SAVED")),x(!1);case 7:case"end":return r.stop()}}),r)})))())}return function(){e=!1}}),[n,o]);var Z=function(){var e=(0,i.Z)(s().mark((function e(){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return o="?next=".concat(window.location.pathname),a.push("/onboard".concat(o)),e.abrupt("return");case 4:try{y({postId:t._id.toString(),responseId:null,bookmarkType:"SAVED"}),C(!I),w((new Date).getTime())}catch(s){C(!1)}(null===(r=t.bookmarkedIn)||void 0===r?void 0:r.length)>0&&(i={user_id:n._id,event_type:"bookmark_post",time:(new Date).getTime(),event_properties:{hostname:window.location.hostname,url:window.location.pathname,post:t._id,dateAdded:(new Date).getTime()}},(0,m.e)().sendEventToAmplitude(i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.tZ)(h.Jjm,{"aria-label":"Bookmark post",type:I?"bookmarked":"bookmark",onClick:Z,disabled:v,className:"bookmark-button",tooltip:I?"Remove bookmark":"Save for later"})},g=r(60193),v=r(55549),x=r(95438),k=r(58048),O=r(27484),I=r.n(O),C=r(27205),S=r(41827),Z=r(14142);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){return e.startsWith("/discussions/")},P=function(e){return"/discussions"===e},D=function(e){var t=e.user,r=e.postId,n=e.source,o=e.eventType,i=e.eventProperties,a={event_type:o,time:(new Date).getTime(),event_properties:_({postId:r,source:n},i)};t&&(a.user_id=t._id.toString(),a.user_properties={username:t.username,email:t.email,photo:t.photo||"",dateJoined:t.dateJoined||""}),(0,m.e)().sendEventToAmplitude(a)},R=function(e){var t=e.user,r=e.postId,n=e.commentId,o=e.source;D({user:t,postId:r,source:o,eventType:Z.F.COMMENT_ADDED,eventProperties:{responseId:n}})},T=function(e){var t=e.user,r=e.postId,n=e.replyId,o=e.source;D({user:t,postId:r,source:o,eventType:Z.F.REPLY_ADDED,eventProperties:{replyId:n}})},z=function(e){var t=e.user,r=e.postId,n=e.commentId,o=e.source;D({user:t,postId:r,source:o,eventType:Z.F.LIKE_COMMENT,eventProperties:{responseId:n}})},M=function(e){var t=e.user,r=e.postId,n=e.replyId,o=e.source;D({user:t,postId:r,source:o,eventType:Z.F.LIKE_REPLY,eventProperties:{replyId:n}})},A=r(27812),B=r(18792),U=r(16835),F=r(92432);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function(){var e=(0,c.useState)("idle");return{status:e[0],setStatus:e[1]}},K=r(9605);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e){return e.UPDATE_COMMENTS="UPDATE_COMMENTS",e.UPDATE_COMMENTS_COUNT="UPDATE_COMMENTS_COUNT",e.UPDATE_SORT_TYPE="UPDATE_SORT_TYPE",e}($||{}),ee=c.createContext({state:{},dispatch:function(){}}),te=function(e,t){switch(t.type){case $.UPDATE_COMMENTS:return Q(Q({},e),{},{comments:t.payload,loading:!1});case $.UPDATE_COMMENTS_COUNT:return Q(Q({},e),{},{commentsCount:t.payload});case $.UPDATE_SORT_TYPE:return Q(Q({},e),{},{sortType:t.payload,loading:!0});default:return e}},re=function(e){return(e.replyCount>0?e.replyCount:0)+(e.responseCount>0?e.responseCount:0)},ne=function(e,t){return!(I()().diff(I()(e.dateJoined),"days")<=0&&(0,S.$g)(t))},oe=function(e){var t=e.post,r=e.children,n={comments:t.comments,commentsCount:re(t),post:t,loading:!1,sortType:B.YqU.Top},o=(0,c.useReducer)(te,n),i=o[0],a=o[1];return(0,b.tZ)(ee.Provider,{value:{state:i,dispatch:a},children:r})},ie=function(){var e=c.useContext(ee),t=e.state,r=e.dispatch,n=t.comments,o=t.commentsCount,a=t.post,l=t.loading,d=t.sortType,p=function(){var e=(0,F.Db)(B.DnK),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commentId,o=r.contentMarkdown,e.next=3,t({input:{commentId:n,contentMarkdown:o}});case 3:if(i=e.sent,a=i.data,c=i.error,!(l=null===a||void 0===a?void 0:a.addReply.reply)){e.next=10;break}return u=L(L({},l),{},{author:(0,v.Xk)(l.author)}),e.abrupt("return",{reply:u,error:c});case 10:return e.abrupt("return",{reply:l,error:c});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeAddReplyMutation:r}}(),m=p.executeAddReplyMutation,h=function(){var e=(0,F.Db)(B.sDB),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c,l,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commentId,o=r.replyId,i=r.contentMarkdown,e.next=3,t({input:{commentId:n,replyId:o,contentMarkdown:i}});case 3:if(a=e.sent,c=a.data,l=a.error,!(u=null===c||void 0===c?void 0:c.updateReply.reply)){e.next=10;break}return d=H(H({},u),{},{author:(0,v.Xk)(u.author)}),e.abrupt("return",{reply:d,error:l});case 10:return e.abrupt("return",{reply:u,error:l});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeUpdateReplyMutation:r}}(),b=h.executeUpdateReplyMutation,y=function(){var e=(0,F.Db)(B.yuU),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commentId,o=r.replyId,e.next=3,t({input:{commentId:n,replyId:o}});case 3:return i=e.sent,a=i.data,c=i.error,l=null===a||void 0===a?void 0:a.removeReply.reply,e.abrupt("return",{reply:l,error:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeRemoveReplyMutation:r}}(),w=y.executeRemoveReplyMutation,g=function(){var e=(0,F.Db)(B.Le_),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.postId,o=r.contentMarkdown,e.next=3,t({input:{postId:n,contentMarkdown:o}});case 3:if(i=e.sent,a=i.data,c=i.error,!(l=null===a||void 0===a?void 0:a.addComment.comment)){e.next=10;break}return u=V(V({},l),{},{author:(0,v.Xk)(l.author),replies:[]}),e.abrupt("return",{comment:u,error:c});case 10:return e.abrupt("return",{comment:l,error:c});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeAddCommentMutation:r}}(),x=g.executeAddCommentMutation,k=function(){var e=(0,F.Db)(B.Uc2),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commentId,o=r.contentMarkdown,e.next=3,t({input:{id:n,contentMarkdown:o}});case 3:if(i=e.sent,a=i.data,c=i.error,!(l=null===a||void 0===a?void 0:a.updateComment.comment)){e.next=10;break}return u=W(W({},l),{},{author:(0,v.Xk)(l.author)}),e.abrupt("return",{comment:u,error:c});case 10:return e.abrupt("return",{comment:l,error:c});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeUpdateCommentMutation:r}}(),O=k.executeUpdateCommentMutation,I=function(){var e=(0,F.Db)(B.Hi5),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commentId,e.next=3,t({input:{id:n}});case 3:return o=e.sent,i=o.data,a=o.error,c=null===i||void 0===i?void 0:i.removeComment.comment,e.abrupt("return",{comment:c,error:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeRemoveCommentMutation:r}}(),C=I.executeRemoveCommentMutation,S=function(){var e=(0,K.D)().mutation,t=function(){var t=(0,i.Z)(s().mark((function t(r){var n,o,i,a,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.postId,o=r.commentId,t.next=3,e({url:"/ajax/post/response/unlike",body:{postId:n,responseId:o},mapper:function(){return null}});case 3:return i=t.sent,a=i.data,c=i.error,t.abrupt("return",{data:a,error:c});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.postId,o=r.commentId,e.next=3,t({postId:n,commentId:o});case 3:return i=e.sent,a=i.data,c=i.error,e.abrupt("return",{data:a,error:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{unlikeComment:r}}(),Z=S.unlikeComment,E=function(){var e=(0,K.D)().mutation,t=function(){var t=(0,i.Z)(s().mark((function t(r){var n,o,i,a,c,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.postId,o=r.commentId,i=r.replyId,t.next=3,e({url:"/ajax/post/reply/unlike",body:{postId:n,replyId:i,responseId:o},mapper:function(){return null}});case 3:return a=t.sent,c=a.data,l=a.error,t.abrupt("return",{data:c,error:l});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.postId,o=r.replyId,i=r.commentId,e.next=3,t({postId:n,replyId:o,commentId:i});case 3:return a=e.sent,c=a.data,l=a.error,e.abrupt("return",{data:c,error:l});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{unlikeReply:r}}(),_=E.unlikeReply,j=(0,u.Z)().data,P=null===a||void 0===a?void 0:a._id.toString(),D=function(e){r({type:$.UPDATE_COMMENTS_COUNT,payload:e})},R=function(e){r({type:$.UPDATE_COMMENTS,payload:e})},T=function(){D(o+1)},z=function(e){if(Array.isArray(n)){if(!e)return D(o-1);var t=n.find((function(t){return t.id===e}));if(t){var r=t.replies.length;D(o-r-1)}}},M=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(j,t)){e.next=3;break}return(0,f.C)("error","You cannot submit a comment with links currently as you are a new user"),e.abrupt("return",null);case 3:if(Array.isArray(n)){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,x({postId:P,contentMarkdown:t});case 7:if(r=e.sent,o=r.comment,i=r.error,o){e.next=13;break}return i&&(0,f.C)("error",i.message),e.abrupt("return",null);case 13:return R([o].concat((0,A.Z)(n))),T(),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i,a,c,l,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.content,o=t.commentId,i=t.position,a=void 0===i?"start":i,ne(j,r)){e.next=4;break}return(0,f.C)("error","You cannot submit a comment with links currently as you are a new user"),e.abrupt("return",null);case 4:if(Array.isArray(n)){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,m({commentId:o,contentMarkdown:r});case 8:if(c=e.sent,l=c.reply,u=c.error,l){e.next=14;break}return u&&(0,f.C)("error",u.message),e.abrupt("return",null);case 14:return d=n.map((function(e){if(e.id!==o)return e;var t="start"===a?[l].concat((0,A.Z)(e.replies)):[].concat((0,A.Z)(e.replies),[l]);return Q(Q({},e),{},{replies:t})})),R(d),T(),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i,a,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.commentId,o=t.content,ne(j,o)){e.next=4;break}return(0,f.C)("error","You cannot submit a comment with links currently as you are a new user"),e.abrupt("return",null);case 4:if(Array.isArray(n)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,O({commentId:r,contentMarkdown:o});case 8:if(i=e.sent,a=i.comment,c=i.error,a){e.next=14;break}return c&&(0,f.C)("error",c.message),e.abrupt("return");case 14:l=n.map((function(e){return e.id!==r?e:Q(Q({},e),a)})),R(l);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i,a,c,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.commentId,o=t.replyId,i=t.content,ne(j,i)){e.next=4;break}return(0,f.C)("error","You cannot submit a comment with links currently as you are a new user"),e.abrupt("return",null);case 4:if(Array.isArray(n)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,b({commentId:r,replyId:o,contentMarkdown:i});case 8:if(a=e.sent,c=a.reply,l=a.error,c){e.next=14;break}return l&&(0,f.C)("error",l.message),e.abrupt("return");case 14:u=n.map((function(e){var t=e.replies.map((function(e){return e.id!==o?e:Q(Q({},e),c)}));return Q(Q({},e),{},{replies:t})})),R(u);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,C({commentId:t});case 4:if(r=e.sent,!(o=r.error)){e.next=9;break}return(0,f.C)("error",o.message),e.abrupt("return");case 9:i=n.filter((function(e){return e.id!==t})),R(i),z(t),(0,f.C)("success","Comment deleted successfully");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.replyId,o=t.commentId,Array.isArray(n)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w({commentId:o,replyId:r});case 5:if(i=e.sent,!(a=i.error)){e.next=10;break}return(0,f.C)("error",a.message),e.abrupt("return");case 10:c=n.map((function(e){var t=e.replies.filter((function(e){return e.id!==r}));return Q(Q({},e),{},{replies:t})})),R(c),z(),(0,f.C)("success","Reply deleted successfully");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)){e.next=2;break}return e.abrupt("return");case 2:return r=n.map((function(e){return e.id!==t?e:Q(Q({},e),{},{totalReactions:e.totalReactions-e.myTotalReactions,myTotalReactions:0})})),R(r),e.next=6,Z({postId:P,commentId:t});case 6:o=e.sent,(i=o.error)&&(0,f.C)("error",i.message);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=(0,i.Z)(s().mark((function e(t){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.commentId,o=t.replyId,Array.isArray(n)){e.next=3;break}return e.abrupt("return");case 3:return i=n.map((function(e){var t=e.replies.map((function(e){return e.id!==o?e:Q(Q({},e),{},{totalReactions:e.totalReactions-e.myTotalReactions,myTotalReactions:0})}));return Q(Q({},e),{},{replies:t})})),R(i),e.next=7,_({postId:P,replyId:o,commentId:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{comments:n,commentsCount:o,post:a,loading:l,sortType:d,addComment:M,addReply:N,editComment:X,editReply:q,deleteComment:Y,deleteReply:G,likeComment:function(e){if(Array.isArray(n)){var t=n.map((function(t){return t.id!==e?t:Q(Q({},t),{},{totalReactions:(t.totalReactions||0)+1,myTotalReactions:(t.myTotalReactions||0)+1})}));R(t)}},unlikeComment:J,likeReply:function(e){if(Array.isArray(n)){var t=n.map((function(t){var r=t.replies.map((function(t){return t.id!==e?t:Q(Q({},t),{},{totalReactions:(t.totalReactions||0)+1,myTotalReactions:(t.myTotalReactions||0)+1})}));return Q(Q({},t),{},{replies:r})}));R(t)}},unlikeReply:te,updateComments:R,updateSortType:function(e){r({type:$.UPDATE_SORT_TYPE,payload:e})}}},ae=r(87536),se=r(56312),ce=r(1604),le=r(92707),ue=r(64529);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=(0,ue.Ue)((function(e){return{statusMap:{},setStatusMap:function(t){var r=t.postId,o=t.status;e((function(e){return{statusMap:pe(pe({},e.statusMap),{},(0,n.Z)({},r,o))}}))}}})),fe=function(){var e=(0,d.useRouter)().pathname;return P(e)?Z.L.DISCUSSIONS_FEED:j(e)?Z.L.DISCUSSIONS_PAGE:null},he=null,be=(0,ue.Ue)((function(e){return{timer:null,id:"",setId:function(t){e({id:t}),he&&clearTimeout(he),he=setTimeout((function(){e({id:null})}),5e3)}}})),ye=r(27695),we=r(61838),ge=r(61411),ve=r(86321),xe=r(36521),ke=r(45578),Oe=r.n(ke);var Ie={name:"rlkvue",styles:"display:flex;flex-direction:column;gap:1rem;border-radius:0.75rem;border-width:1px;--tw-border-opacity:1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:1rem;.dark &{border-color:rgb(39 39 42 / 0.8);}"},Ce=function(e){var t=e.children;return(0,b.tZ)("div",{css:Ie,children:t})},Se={name:"4zk4ri",styles:"display:flex;flex-direction:column;gap:1rem"},Ze={name:"1ebd0xz",styles:"display:flex;align-items:center;justify-content:space-between;font-size:0.75rem;line-height:1rem;--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));}"},Ee={name:"h6sqxb",styles:"@media (min-width: 640px){display:none;}"},_e={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},je={name:"7chc96",styles:"display:none;align-items:center;gap:0.5rem;--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}@media (min-width: 640px){display:flex;}"},Pe={name:"1kph1zd",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:500;:hover{text-decoration-line:underline;}"},De={name:"1cbf5cm",styles:"display:flex;align-items:center;justify-content:center;border-radius:9999px;border-width:1px;--tw-border-opacity:1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:0.375rem;--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:100ms;:hover{--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));}:focus{--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));outline:2px solid transparent;outline-offset:2px;}.dark &{--tw-border-opacity:1;border-color:rgb(39 39 42 / var(--tw-border-opacity));--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}.dark &:hover{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}.dark &:focus{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}@media (min-width: 640px){display:none;}"},Re={name:"aj6rbz",styles:"display:flex;gap:0.5rem"},Te={name:"vaak6u",styles:"display:none;@media (min-width: 640px){display:block;}"},ze={name:"h9aq5x",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:500"},Me={name:"h9aq5x",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:500"},Ae={name:"h9aq5x",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:500"},Be=c.forwardRef((function(e,t){var r=e.onChange,n=e.value,o=e.onCancelHandler,i=void 0===o?function(){}:o,a=e.disableCommentButton,s=e.disableCancelButton,l=e.disableInput,d=e.mode,p=void 0===d?"add":d,m="add"===p,f="edit"===p,y=(0,c.useRef)(null),w=(0,ye.Z)().uploadSignedImage,g=(0,u.Z)().data,v=(0,ge.F)(t,y),x=ie(),k=x.post,O=x.comments,I=(0,c.useRef)(null);(0,we.Z)({isConfirm:!!n}),(0,c.useLayoutEffect)((function(){var e=y.current;e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))}),[]);var C=[];k.author&&C.push({name:k.author.name,username:k.author.username,photo:k.author.photo}),(O||[]).map((function(e){return e.author.name!==(k.author&&k.author.name)&&C.push({name:e.author.name,username:e.author.username,photo:e.author.photo}),null})),C=Oe()(C,"username"),g&&(C=C.filter((function(e){return e.username!==g.username}))),C=C.slice(0,5);return(0,b.BX)(Ce,{children:[(0,b.BX)("div",{css:Se,children:[(0,b.BX)(xe.E.p,{css:Ze,initial:{opacity:0,x:20,y:10},animate:{opacity:1,x:0,y:0},children:[(0,b.tZ)("span",{children:"Markdown supported"}),(0,b.tZ)("div",{css:Ee,children:(0,b.tZ)(h.hU,{disabled:s,onClick:i,size:"xs",Icon:h.X})})]}),(0,b.tZ)(xe.E.div,{initial:{opacity:0,x:20,y:-10},animate:{opacity:1,x:0,y:0},children:(0,b.tZ)(ve.Z,{getRef:v,name:"editor",onEscapeHandler:i,onChangeHandler:r,onSubmitHandler:function(){var e=I.current;e&&e.click()},forceDisableTextArea:l,initialValue:null!==n&&void 0!==n?n:"",defaultMentionSuggestions:C,isPublicationPost:!0,disableToolbar:!0,disablePreview:!0,uploadSignedImage:w,disableImageUpload:!g})})]}),(0,b.BX)(xe.E.div,{css:_e,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:[(0,b.BX)(h.Xlt,{href:"/code-of-conduct",target:"_blank",children:[(0,b.BX)("div",{css:je,children:[(0,b.tZ)("span",{css:Pe,children:"Code of conduct"}),(0,b.tZ)(h.Gux,{size:"sm"})]}),(0,b.tZ)("div",{css:De,children:(0,b.tZ)(h.TUt,{size:"md"})})]}),(0,b.BX)("div",{css:Re,children:[(0,b.tZ)("div",{css:Te,children:(0,b.tZ)(h.zxk,{disabled:s,appearance:"tertiary-slate",size:"xs",onClick:i,children:(0,b.tZ)("span",{css:ze,children:"Cancel"})})}),(0,b.BX)(h.zxk,{ref:I,disabled:a,appearance:"primary",size:"xs",children:[m&&(0,b.tZ)("span",{css:Me,children:"Comment"}),f&&(0,b.tZ)("span",{css:Ae,children:"Save"})]})]})]})]})})),Ue=r(30384),Fe=r(34615),Ne=r(43575);var Le={name:"1j8syi2",styles:"position:relative;display:flex;flex-direction:column;gap:0.25rem"},Xe={name:"24d8nf",styles:"position:absolute;bottom:0px;right:0px;width:100%"},He={name:"1adm7ia",styles:"height:66px;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:#fff;--tw-gradient-to:transparent;--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);.dark &{--tw-gradient-from:#09090b;--tw-gradient-to:rgb(9 9 11 / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);}"},qe={name:"1wl569r",styles:"position:relative;z-index:20"},Ve={name:"1b9fqr2",styles:"display:flex;align-items:center;justify-content:center;gap:0.5rem;font-size:0.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));}"},Ye=function(e){var t=e.html,r=e.text,n="/discussions"===(0,d.useRouter)().pathname,o=(0,Ne.A)(t),i=n?(r.match(/\n/g)||[]).length:0,a=(0,x.imageReplacer)(o),s=a!==o,l=n&&(r.length>320||i>3||s),u=(0,c.useState)(!l),p=u[0],m=u[1];return(0,b.BX)("div",{css:Le,children:[(0,b.tZ)("div",{dangerouslySetInnerHTML:{__html:a},className:"prose",css:['color:rgb(82 82 91 / var(--tw-text-opacity));max-width:65ch;& :where([class~="lead"]):not(:where([class~="not-prose"] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em;}& :where(a):not(:where([class~="not-prose"] *)){color:var(--tw-prose-links);text-decoration:underline;font-weight:500;}& :where(a):not(:where([class~="not-prose"] *)).user-mention{text-decoration:none;color:#2563eb;}& :where(strong):not(:where([class~="not-prose"] *)){color:var(--tw-prose-bold);font-weight:600;}& :where(a strong):not(:where([class~="not-prose"] *)){color:inherit;}& :where(blockquote strong):not(:where([class~="not-prose"] *)){color:inherit;}& :where(thead th strong):not(:where([class~="not-prose"] *)){color:inherit;}& :where(ol):not(:where([class~="not-prose"] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em;}& :where(ol[type="A"]):not(:where([class~="not-prose"] *)){list-style-type:upper-alpha;}& :where(ol[type="a"]):not(:where([class~="not-prose"] *)){list-style-type:lower-alpha;}& :where(ol[type="A" s]):not(:where([class~="not-prose"] *)){list-style-type:upper-alpha;}& :where(ol[type="a" s]):not(:where([class~="not-prose"] *)){list-style-type:lower-alpha;}& :where(ol[type="I"]):not(:where([class~="not-prose"] *)){list-style-type:upper-roman;}& :where(ol[type="i"]):not(:where([class~="not-prose"] *)){list-style-type:lower-roman;}& :where(ol[type="I" s]):not(:where([class~="not-prose"] *)){list-style-type:upper-roman;}& :where(ol[type="i" s]):not(:where([class~="not-prose"] *)){list-style-type:lower-roman;}& :where(ol[type="1"]):not(:where([class~="not-prose"] *)){list-style-type:decimal;}& :where(ul):not(:where([class~="not-prose"] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em;}& :where(ol > li):not(:where([class~="not-prose"] *))::marker{font-weight:400;color:var(--tw-prose-counters);}& :where(ul > li):not(:where([class~="not-prose"] *))::marker{color:var(--tw-prose-bullets);}& :where(hr):not(:where([class~="not-prose"] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em;}& :where(blockquote):not(:where([class~="not-prose"] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-left-width:0.25rem;border-left-color:var(--tw-prose-quote-borders);quotes:"\\201C""\\201D""\\2018""\\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em;border-color:#e2e8f0;}& :where(blockquote p:first-of-type):not(:where([class~="not-prose"] *))::before{content:open-quote;}& :where(blockquote p:last-of-type):not(:where([class~="not-prose"] *))::after{content:close-quote;}& :where(h1):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:0.8888889em;line-height:1.1111111;}& :where(h1 strong):not(:where([class~="not-prose"] *)){font-weight:900;color:inherit;}& :where(h2):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333;}& :where(h2 strong):not(:where([class~="not-prose"] *)){font-weight:800;color:inherit;}& :where(h3):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:0.6em;line-height:1.6;}& :where(h3 strong):not(:where([class~="not-prose"] *)){font-weight:700;color:inherit;}& :where(h4):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.5em;margin-bottom:0.5em;line-height:1.5;}& :where(h4 strong):not(:where([class~="not-prose"] *)){font-weight:700;color:inherit;}& :where(img):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em;}& :where(figure > *):not(:where([class~="not-prose"] *)){margin-top:0;margin-bottom:0;}& :where(figcaption):not(:where([class~="not-prose"] *)){color:var(--tw-prose-captions);font-size:0.875em;line-height:1.4285714;margin-top:0.8571429em;}& :where(code):not(:where([class~="not-prose"] *)){color:var(--tw-prose-code);font-weight:600;font-size:0.875em;}& :where(code):not(:where([class~="not-prose"] *))::after,& :where(code):not(:where([class~="not-prose"] *))::before{display:none;}& :where(code):not(:where([class~="not-prose"] *))::before{content:"`";}& :where(code):not(:where([class~="not-prose"] *))::after{content:"`";}& :where(a code):not(:where([class~="not-prose"] *)){color:inherit;}& :where(h1 code):not(:where([class~="not-prose"] *)){color:inherit;}& :where(h2 code):not(:where([class~="not-prose"] *)){color:inherit;font-size:0.875em;}& :where(h3 code):not(:where([class~="not-prose"] *)){color:inherit;font-size:0.9em;}& :where(h4 code):not(:where([class~="not-prose"] *)){color:inherit;}& :where(blockquote code):not(:where([class~="not-prose"] *)){color:inherit;}& :where(thead th code):not(:where([class~="not-prose"] *)){color:inherit;}& :where(pre):not(:where([class~="not-prose"] *)){color:var(--tw-prose-pre-code);background-color:#0f172a;overflow-x:auto;font-weight:400;font-size:0.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:0.375rem;padding-top:0.8571429em;padding-right:1.1428571em;padding-bottom:0.8571429em;padding-left:1.1428571em;}& :where(pre code):not(:where([class~="not-prose"] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit;}& :where(pre code):not(:where([class~="not-prose"] *))::before{content:none;}& :where(pre code):not(:where([class~="not-prose"] *))::after{content:none;}& :where(table):not(:where([class~="not-prose"] *)){width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:0.875em;line-height:1.7142857;}& :where(thead):not(:where([class~="not-prose"] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders);font-weight:600;}& :where(thead th):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;vertical-align:bottom;padding-right:0.5714286em;padding-bottom:0.5714286em;padding-left:0.5714286em;}& :where(tbody tr):not(:where([class~="not-prose"] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders);}& :where(tbody tr:last-child):not(:where([class~="not-prose"] *)){border-bottom-width:0;}& :where(tbody td):not(:where([class~="not-prose"] *)){vertical-align:baseline;}& :where(tfoot):not(:where([class~="not-prose"] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders);}& :where(tfoot td):not(:where([class~="not-prose"] *)){vertical-align:top;}--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgb(0 0 0 / 50%);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.375;& :where(p):not(:where([class~="not-prose"] *)){margin-top:1.25em;margin-bottom:1.25em;}& :where(video):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em;}& :where(figure):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em;}& :where(li):not(:where([class~="not-prose"] *)){margin-top:0.5em;margin-bottom:0.5em;}& :where(ol > li):not(:where([class~="not-prose"] *)){padding-left:0.375em;}& :where(ul > li):not(:where([class~="not-prose"] *)){padding-left:0.375em;}& :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:0.75em;margin-bottom:0.75em;}& :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em;}& :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em;}& :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em;}& :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em;}& :where(ul ul, ul ol, ol ul, ol ol):not(:where([class~="not-prose"] *)){margin-top:0.75em;margin-bottom:0.75em;}& :where(hr + *):not(:where([class~="not-prose"] *)){margin-top:0;}& :where(h2 + *):not(:where([class~="not-prose"] *)){margin-top:0;}& :where(h3 + *):not(:where([class~="not-prose"] *)){margin-top:0;}& :where(h4 + *):not(:where([class~="not-prose"] *)){margin-top:0;}& :where(thead th:first-child):not(:where([class~="not-prose"] *)){padding-left:0;}& :where(thead th:last-child):not(:where([class~="not-prose"] *)){padding-right:0;}& :where(tbody td, tfoot td):not(:where([class~="not-prose"] *)){padding-top:0.5714286em;padding-right:0.5714286em;padding-bottom:0.5714286em;padding-left:0.5714286em;}& :where(tbody td:first-child, tfoot td:first-child):not(:where([class~="not-prose"] *)){padding-left:0;}& :where(tbody td:last-child, tfoot td:last-child):not(:where([class~="not-prose"] *)){padding-right:0;}& :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0;}& :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0;}& :where(div[data-node-type="callout"]):not(:where([class~="not-prose"] *)){display:flex;justify-content:flex-start;align-items:baseline;background-color:#F8FAFC;border:1px solid #E2E8F0;padding:1rem 1.5rem;gap:0.5rem;border-radius:0.5rem;margin:1rem 0;word-break:break-word;}& :where(div[data-node-type="callout-emoji"]):not(:where([class~="not-prose"] *)){background:#E2E8F0;border-radius:0.5rem;min-width:1.75rem;width:1.75rem;height:1.5rem;display:flex;justify-content:center;align-items:center;font-size:1rem;}& :where(li p):not(:where([class~="not-prose"] *)){margin:0px;}& :where(blockquote p:first-of-type::before, blockquote p:last-of-type::after):not(:where([class~="not-prose"] *)){content:"";}& :where(details):not(:where([class~="not-prose"] *)){border:none;border-radius:4px;padding:.5em 3em 0;}& :where(details > :not(summary)):not(:where([class~="not-prose"] *)){padding:0.5em 0 0.5em 1em;position:relative;font-size:1.125rem;margin:0;}& :where(details > :not(summary)):not(:where([class~="not-prose"] *))::before{position:absolute;left:0.3em;top:0;content:"";border:1px solid #cbd5e1;border-radius:4px;width:1px;height:100%;}& :where(summary):not(:where([class~="not-prose"] *)){font-size:1.125rem;font-weight:bold;margin:0 0 0.5rem 0;}& :where(kbd):not(:where([class~="not-prose"] *)){background-color:#eee;border-radius:3px;border:1px solid #b4b4b4;box-shadow:0 1px 1px rgba(0, 0, 0, .2), 0 2px 0 0 rgba(255, 255, 255, .7) inset;color:#333;display:inline-block;font-size:.85em;font-weight:700;line-weight:1;padding:2px 4px;white-space:nowrap;}& :where(abbr):not(:where([class~="not-prose"] *)){font-style:italic;}& :where(dt):not(:where([class~="not-prose"] *)){font-weight:bold;}& :where(dd):not(:where([class~="not-prose"] *)){margin-bottom:1rem;margin-inline-start:1rem;}& :where(h1, h2, h3, h4, h5, h6):not(:where([class~="not-prose"] *)){font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";}& :where(td):not(:where([class~="not-prose"] *)){border:1px solid rgba(226, 232, 240, 0.8);}& :where(th):not(:where([class~="not-prose"] *)){border:1px solid rgba(226, 232, 240, 0.8);font-weight:400;}--tw-text-opacity:1;word-break:normal;overflow-wrap:anywhere;.dark &{color:#cbd5e1;}.dark & :where(a):not(:where([class~="not-prose"] *)){color:#cbd5e1;}.dark & :where(div[data-node-type="callout"]):not(:where([class~="not-prose"] *)){background-color:#27272a;border:1px solid #334155;}.dark & :where(div[data-node-type="callout-emoji"]):not(:where([class~="not-prose"] *)){background:#475569;}.dark & :where(details > :not(summary)):not(:where([class~="not-prose"] *))::before{border:1px solid #334155;}.dark & :where(kbd):not(:where([class~="not-prose"] *)){background-color:#444;border:1px solid #757575;color:#FFF;}.dark & :where(strong):not(:where([class~="not-prose"] *)){color:#cbd5e1;}.dark & :where(ol > li):not(:where([class~="not-prose"] *))::before{color:#bdbdbd;}.dark & :where(blockquote):not(:where([class~="not-prose"] *)){border-color:#334155;color:#f8fafc;}.dark & :where(h1, h2, h3, h4, h5, h6):not(:where([class~="not-prose"] *)){color:#cbd5e1;}.dark & :where(figure figcaption):not(:where([class~="not-prose"] *)){color:#bdbdbd;}.dark & :where(code):not(:where([class~="not-prose"] *)){color:#cbd5e1;background-color:#27272a;}.dark & :where(a code):not(:where([class~="not-prose"] *)){color:#cbd5e1;}.dark & :where(pre):not(:where([class~="not-prose"] *)){color:#cbd5e1;background-color:#27272a;}.dark & :where(pre code):not(:where([class~="not-prose"] *)){color:#cbd5e1;background-color:transparent;}.dark & :where(thead):not(:where([class~="not-prose"] *)){color:#cbd5e1;}.dark & :where(td):not(:where([class~="not-prose"] *)){border:1px solid #27272a;}.dark & :where(th):not(:where([class~="not-prose"] *)){border:1px solid #27272a;}.dark & :where(li p):not(:where([class~="not-prose"] *)){margin:0px;}',!p&&{maxHeight:"88px",overflow:"hidden"},"",""]}),!p&&l&&(0,b.tZ)("div",{css:Xe,children:(0,b.tZ)("div",{css:He})}),l&&(0,b.tZ)("div",{css:qe,children:(0,b.tZ)("button",{type:"button",css:Ve,onClick:function(){m((function(e){return!e}))},children:(0,b.BX)("span",{children:["Show ",p?"less":"more"]})})})]})};function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ke={name:"1vfhcql",styles:"object-fit:cover"},Je={name:"1vfhcql",styles:"object-fit:cover"},Qe={name:"vaak6u",styles:"display:none;@media (min-width: 640px){display:block;}"},$e={name:"h6sqxb",styles:"@media (min-width: 640px){display:none;}"},et=function(e){var t=e.children;return(0,b.BX)(b.HY,{children:[(0,b.tZ)("div",{css:Qe,children:(0,b.tZ)(h.qEK,{children:t})}),(0,b.tZ)("div",{css:$e,children:(0,b.tZ)(h.qEK,{size:"sm",children:t})})]})},tt={name:"12w6m6c",styles:"display:inline-block;border-radius:9999px;:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgb(37 99 235 / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:#fff;}.dark &:focus{--tw-ring-offset-color:#27272a;}"},rt=function(){var e=ie().post,t=fe(),r=null===e||void 0===e?void 0:e.author,n=null===e||void 0===e?void 0:e.coAuthors,o=function(e){var o,i,a,s=e.id,c=null!==(o=e.stamp)&&void 0!==o?o:"",l=e.author,u=null===(i=l._id)||void 0===i?void 0:i.toString(),d=l.name,p=l.username,m=l.photo||C.IZ,f=(null===r||void 0===r?void 0:r._id.toString())===u,y=null===n||void 0===n?void 0:n.some((function(e){return e._id.toString()===u})),w=function(e){var t=e.src,r=e.alt;return t?(0,b.tZ)(h.mi6,{alt:r,src:(0,x.resizeImage)(t,{w:124,h:124,c:"face"}),fill:!0,css:Ke}):(0,b.tZ)(h.mi6,{alt:r,src:C.IZ,fill:!0,css:Je})}({src:m,alt:d||"Default profile photo"}),v=(a=e.dateAdded,I()().diff(I()(a),"hours")<=23?I()(a).fromNow():I()(a).format("MMM D, YYYY")),k="/@".concat(p,"?source=").concat(t);return{id:s,stamp:c,author:{id:u,name:d,username:p,avatar:(0,b.tZ)(h.Xlt,{href:k,css:tt,children:(0,b.tZ)(et,{children:(0,b.tZ)(g.Z,{userId:u,closeOnClick:!0,children:w})})}),isPostAuthor:f,isPostCoAuthor:y},dateAdded:v,content:(0,b.tZ)(Ye,{html:e.content.html,text:e.content.text})}},i=function(e){return null===e||void 0===e?void 0:e.map((function(e){return o(e)}))};return{getMappedComment:function(e){var t,r=e.replies;return Ge(Ge({},o(e)),r&&{replies:i(r),repliesCountText:(t=r.length,(0,S.uv)({count:t,singularTerm:"reply",pluralTerm:"replies"}))})},getMappedReply:o}};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var it={name:"h9aq5x",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:500"},at=function(e){return(0,b.tZ)(h.zxk,ot(ot({},e),{},{size:"xs",appearance:"link-slate",children:(0,b.tZ)("span",{css:it,children:"Reply"})}))},st=r(4730),ct=r(80954),lt=r.n(ct),ut=r(48821),dt=r(30006),pt=["isLoading"];function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ft=function(e){var t=1,r=function r(){Math.round(100*(t+Number.EPSILON))/100!==1&&(t-=.1,e&&(e.style.transform="scale(".concat(t,")")),window.requestAnimationFrame(r))};window.requestAnimationFrame((function n(){Math.round(100*(t+Number.EPSILON))/100!==2?(t+=.1,e&&(e.style.transform="scale(".concat(t,")")),window.requestAnimationFrame(n)):r()}))},ht={name:"bjn8wh",styles:"position:relative"},bt={name:"qk5wn7",styles:"position:relative;display:flex;align-items:center;gap:0.25rem"},yt={name:"1cvqebc",styles:"position:relative;display:flex;width:2rem;align-items:center"},wt={name:"1a42fhj",styles:"z-index:50;height:2.5rem;width:2.5rem;border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));padding:0.5rem;text-align:center;font-size:0.875rem;line-height:22px;--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));.dark &{--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgb(24 24 27 / var(--tw-text-opacity));}"},gt={name:"80mufo",styles:"z-index:50;border-radius:0.375rem;--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));padding:0.5rem;padding-left:0.75rem;padding-right:0.75rem;font-size:0.75rem;line-height:1rem;--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));.dark &{--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgb(24 24 27 / var(--tw-text-opacity));}"},vt={name:"1rtcc2l",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}"},xt=function(e){var t=e.getReactions,r=e.onReact,n=e.saveReactionsCount,o=e.goToPublicationLogin,i=t(),a=i.totalReactionsByCurrentUser,s=i.totalReactions,l=(0,c.useRef)(null),d=(0,c.useState)(!1),p=d[0],m=d[1],f=(0,c.useRef)(0),y=(0,u.Z)().data,w=(0,ut.Z)((function(){var e;null===(e=l.current)||void 0===e||e.classList.remove("shake")}),1e3),g=(0,U.Z)(w,3)[2],v=(0,ut.Z)((function(){m(!1)}),1e3),x=(0,U.Z)(v,3)[2],k=(0,c.useCallback)(lt()((function(){n(f.current),f.current=0}),1e3),[]),O=(0,b.tZ)("button",{type:"button","aria-label":"Like this comment",onClick:function(){y?(m(!0),x(),10!==a?(f.current+=1,r(),k(),ft(l.current)):function(){var e;null===(e=l.current)||void 0===e||e.classList.add("shake"),g()}()):o()},css:["border-radius:9999px;padding:0.375rem;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));:hover{--tw-bg-opacity:1;background-color:rgb(254 242 242 / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity));}.dark &{--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));}.dark &:hover{--tw-bg-opacity:0.62;background-color:rgb(69 10 10 / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity));}",a>0&&{"--tw-text-opacity":"1",color:"rgb(220 38 38 / var(--tw-text-opacity))",".dark &":{"--tw-text-opacity":"1",color:"rgb(239 68 68 / var(--tw-text-opacity))"}},"",""],children:(0,b.tZ)("div",{ref:l,children:(0,b.tZ)(h.Qt$,{size:"md",solid:a>0})})});return(0,b.tZ)(dt.zt,{children:(0,b.BX)("div",{css:ht,children:[(0,b.tZ)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes shake {\n            0% { transform: translateX(0) }\n            25% { transform: translateX(1px) }\n            50% { transform: translateX(-1px) }\n            75% { transform: translateX(1px) }\n            100% { transform: translateX(0) }\n          }\n          .shake {\n            animation-name: shake;\n            animation-iteration-count: 2;\n            animation-duration: 400ms;\n            animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);\n            will-change: transform, opacity;\n          }\n          "}}),(0,b.BX)("div",{css:bt,children:[(0,b.tZ)("div",{css:yt,children:a>0?(0,b.BX)(dt.fC,{open:p,children:[(0,b.tZ)(dt.xz,{asChild:!0,children:O}),(0,b.tZ)(dt.h_,{children:(0,b.tZ)(dt.VY,{asChild:!0,sideOffset:5,children:(0,b.tZ)(xe.E.div,{css:wt,initial:{opacity:0,y:5},animate:{opacity:1,y:0},children:"+".concat(a)})})})]}):(0,b.BX)(dt.fC,{children:[(0,b.tZ)(dt.xz,{asChild:!0,children:O}),(0,b.tZ)(dt.VY,{sideOffset:5,css:gt,children:"Like this comment"})]})}),s>0&&(0,b.tZ)("span",{css:vt,children:(0,S.sy)(s)})]})]})})},kt={name:"udy9wu",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(244 244 245 / var(--tw-bg-opacity));.dark &{--tw-bg-opacity:1;background-color:rgb(39 39 42 / var(--tw-bg-opacity));}"},Ot={name:"76bn4g",styles:"pointer-events:none;visibility:hidden;padding:0.375rem"},It=function(){return(0,b.tZ)("div",{css:kt,children:(0,b.tZ)("button",{type:"button",css:Ot,children:(0,b.tZ)(h.Qt$,{size:"md"})})})},Ct=function(e){var t=(0,Ue._)().open,r=e.isLoading,o=(0,st.Z)(e,pt);return r?(0,b.tZ)(It,{}):(0,b.tZ)(xt,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({goToPublicationLogin:function(){t()}},o))};var St={name:"6dhm9o",styles:"visibility:hidden"},Zt=function(e){var t=e.canEditComment,r=e.canDeleteComment,n=e.canUnlikeComment,o=e.disableMoreOptionsButton,i=e.onEditComment,a=e.onDeleteComment,s=e.onReportComment,c=e.onUnlikeComment;return(0,u.Z)().data?(0,b.BX)(h.h_2,{children:[(0,b.tZ)(h.$FS,{disabled:o,children:(0,b.tZ)(h.hU,{Icon:h.BFr,"aria-label":"Comment More Actions"})}),(0,b.BX)(h.AWV,{hideWhenDetached:!0,sideOffset:10,align:"end",children:[n&&(0,b.tZ)(h.O3W,{onClick:c,text:"Unlike comment",startIcon:h.XnY}),t?(0,b.tZ)(h.O3W,{onClick:i,text:"Edit comment",startIcon:h.SrG}):null,r?(0,b.tZ)(h.O3W,{onClick:a,text:"Delete comment",startIcon:h.HG3}):null,(0,b.tZ)(h.O3W,{onClick:s,text:"Report",startIcon:h.WNf,intent:"warning"})]})]}):(0,b.tZ)("div",{css:St,children:(0,b.tZ)(h.hU,{disabled:!0,Icon:h.BFr})})};function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jt=ce.z.object({reply:ce.z.string().min(1,"Reply cannot be empty")}),Pt={name:"15idi1d",styles:"display:flex;flex-direction:column;gap:0.75rem"},Dt=function(e){var t,r,n=(0,u.Z)(),o=n.data,a=n.isValidating,l=e.author,d=e.highlight,p=e.onReplyClick,m=e.id,y=e.content,w=e.disableInteraction,g=void 0!==w&&w,v=e.commentId,x=e.myTotalReactions,k=e.totalReactions,O=(0,c.useState)("view"),I=O[0],C=O[1],S=ie(),Z=S.editReply,E=S.deleteReply,_=S.likeReply,j=S.post,P=S.unlikeReply,D=null===j||void 0===j?void 0:j._id.toString(),R=function(){var e=(0,F.Db)(B.MZY),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commentId,o=r.replyId,i=r.count,e.next=3,t({input:{commentId:n,replyId:o,likesCount:i}});case 3:return a=e.sent,c=a.data,l=a.error,e.abrupt("return",{data:c,error:l});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeLikeReplyMutation:r}}(),T=R.executeLikeReplyMutation,z=G(),A=z.status,N=z.setStatus,L=(0,Fe.V)().openReply,X="loading"===me().statusMap[D],H=fe(),q=(0,ae.cI)({resolver:(0,se.F)(jt),mode:"onChange",defaultValues:{reply:null!==(t=y.markdown)&&void 0!==t?t:""}}),V=q.handleSubmit,Y=q.control,W=q.reset,K=q.setValue,J=q.formState,Q=J.isValid,$=J.isSubmitting,ee=function(){C("view")},te=function(){var e;W({reply:null!==(e=y.markdown)&&void 0!==e?e:""}),ee()},re=(null===o||void 0===o||null===(r=o._id)||void 0===r?void 0:r.toString())===l._id.toString(),ne="superuser"===(null===o||void 0===o?void 0:o.role),oe=re,ce=re||ne,le=rt().getMappedReply,ue=function(){var e=(0,i.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reply,e.prev=1,e.next=4,Z({commentId:v,replyId:m,content:r});case 4:K("reply",r),ee(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete this reply?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,N("pending"),e.next=7,E({commentId:v,replyId:m});case 7:N("success"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),N("error"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),pe="pending"===A,he=g||$||pe||a,be=g||pe||a||he,ye=g||$||!Q||a,we=g||$||a,ge=g||$||a,ve=x>0,xe=function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(m);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,i.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({replyId:m,commentId:v,count:t});case 2:if(r=e.sent,!(n=r.error)){e.next=7;break}return(0,f.C)("error",n.message),e.abrupt("return");case 7:M({postId:D,replyId:m,source:H,user:o});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=(0,b.tZ)(at,{disabled:he,onClick:p}),Ie=(0,b.tZ)(Ct,{isLoading:X,getReactions:function(){return{totalReactionsByCurrentUser:x,totalReactions:k}},onReact:xe,saveReactionsCount:ke}),Ce=(0,b.tZ)("form",{onSubmit:V(ue),children:(0,b.tZ)(ae.Qr,{name:"reply",control:Y,rules:{required:!0},render:function(e){var t=e.field;return(0,b.tZ)(Be,{mode:"edit",disableCommentButton:ye,disableCancelButton:we,disableInput:ge,ref:t.ref,value:t.value,onChange:t.onChange,onCancelHandler:te})}})}),Se="edit"===I,Ze="view"===I,Ee=(0,c.useMemo)((function(){return le(e)}),[y]);return(0,b.tZ)(b.HY,{children:(0,b.BX)("div",{css:Pt,children:[Ze&&(0,b.tZ)(h.p89,_t(_t({likes:Ie,reply:Oe},Ee),{},{moreOptions:(0,b.tZ)(Zt,{canEditComment:oe,canDeleteComment:ce,canUnlikeComment:ve,disableMoreOptionsButton:be,onDeleteComment:de,onReportComment:function(){requestAnimationFrame((function(){L({postId:D,commentId:v,replyId:m})}))},onUnlikeComment:function(){P({commentId:v,replyId:m})},onEditComment:function(){C("edit")}}),highlight:d})),Se&&Ce]})})};function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zt={name:"pquhdk",styles:"display:flex;flex-direction:column;gap:1rem;padding-left:2rem;@media (min-width: 640px){padding-left:52px;}"},Mt=function(e){var t=e.children;return(0,b.tZ)("div",{css:zt,children:t})},At=ce.z.object({reply:ce.z.string().min(1,"Reply cannot be empty")}),Bt=ce.z.object({comment:ce.z.string().min(1,"Comment cannot be empty")}),Ut={name:"15idi1d",styles:"display:flex;flex-direction:column;gap:0.75rem"},Ft={name:"14dm0v5",styles:"padding-left:2.75rem;@media (min-width: 640px){padding-left:52px;}"},Nt={name:"aj6rbz",styles:"display:flex;gap:0.5rem"},Lt={name:"f3vz0n",styles:"font-weight:500"},Xt=function(e){var t,r,n,o,a=(0,u.Z)(),l=a.data,p=a.isValidating,m=(0,Fe.V)().openComment,y=(0,d.useRouter)(),w=fe(),g=e.replies,v=e.id,x=e.author,k=e.highlight,O=e.stamp,I=e.content,C=e.myTotalReactions,S=e.totalReactions,Z=ie(),E=Z.addReply,_=Z.editComment,P=Z.post,D=Z.deleteComment,R=Z.likeComment,M=Z.unlikeComment,A=function(){var e=(0,F.Db)(B.EIp),t=(0,U.Z)(e,2)[1],r=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o,i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commentId,o=r.count,e.next=3,t({input:{commentId:n,likesCount:o}});case 3:return i=e.sent,a=i.data,c=i.error,e.abrupt("return",{data:a,error:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{executeLikeCommentMutation:r}}(),N=A.executeLikeCommentMutation,L=null===P||void 0===P?void 0:P._id.toString(),X=G(),H=X.status,q=X.setStatus,V=(0,c.useState)(!0),Y=V[0],W=V[1],K=y.pathname,J=j(K),Q=(0,c.useState)(J&&null!==(t=null===g||void 0===g?void 0:g.length)&&void 0!==t?t:0),$=Q[0],ee=Q[1],te=be(),re=te.id,ne=te.setId,oe=null===g||void 0===g?void 0:g.slice(0,$),ce=Array.isArray(oe)&&(null===oe||void 0===oe?void 0:oe.length)>0,le=J&&ce,ue=(null===l||void 0===l||null===(r=l._id)||void 0===r?void 0:r.toString())===(null===(n=x._id)||void 0===n?void 0:n.toString()),de="superuser"===(null===l||void 0===l?void 0:l.role),pe=ue,he=ue||de,ye=ce&&Y,we=(0,c.useState)({open:!1,position:"start"}),ge=we[0],ve=we[1],xe="loading"===me().statusMap[L],ke=(0,Ue._)().open,Oe=(0,ae.cI)({resolver:(0,se.F)(At),mode:"onChange",defaultValues:{reply:""}}),Ie=Oe.handleSubmit,Ce=Oe.control,Se=Oe.reset,Ze=Oe.formState,Ee=Ze.isValid,_e=Ze.isSubmitting,je=(0,ae.cI)({resolver:(0,se.F)(Bt),mode:"onChange",defaultValues:{comment:null!==(o=I.markdown)&&void 0!==o?o:""}}),Pe=je.handleSubmit,De=je.control,Re=je.setValue,Te=je.reset,ze=je.formState,Me=ze.isValid,Ae=ze.isSubmitting,Ne=function(e){ve((function(t){return Tt(Tt({},t),{},{position:e,open:!0})}))},Le=function(){Se({reply:""}),ve((function(e){return Tt(Tt({},e),{},{open:!1})}))},Xe=function(e){J?(Ne("end"),Se(e?{reply:e}:{reply:""})):y.push("/discussions/post/".concat(L,"/#").concat(O))},He=ge.open&&"start"===ge.position,qe=ge.open&&"end"===ge.position,Ve=rt().getMappedComment,Ye=(0,c.useState)("view"),We=Ye[0],Ge=Ye[1],Ke=function(){Ge("view")},Je=function(){var e=(0,i.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.comment,e.prev=1,e.next=4,_({commentId:v,content:r});case 4:Re("comment",r),Ke(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete this comment?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,q("pending"),e.next=7,D(v);case 7:q("success"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),q("error"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(v);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et="edit"===We,tt="view"===We,nt="pending"===H,ot=_e||nt||p,it=nt||p||ot,st=_e||!Ee||nt||p,ct=_e||nt||p,lt=_e||nt||p,ut=Ae||!Me||nt||p,dt=Ae||nt||p,pt=Ae||nt||p,mt=nt||p,ft=C>0,ht=function(){var e=(0,i.Z)(s().mark((function e(t){var r,n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reply,e.prev=1,n=ge.position,e.next=5,E({content:r,commentId:v,position:n});case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:ee((function(e){return e+1})),ne(o.id),Le(),T({postId:L,user:l,replyId:o.id,source:w}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),bt=(0,b.tZ)(Mt,{children:(0,b.tZ)("form",{onSubmit:Ie(ht),children:(0,b.tZ)(ae.Qr,{name:"reply",control:Ce,rules:{required:!0},render:function(e){var t=e.field;return(0,b.tZ)(Be,{disableCommentButton:st,disableCancelButton:ct,disableInput:lt,ref:t.ref,value:t.value,onChange:t.onChange,onCancelHandler:Le})}})})}),yt=function(){var e;Te({comment:null!==(e=I.markdown)&&void 0!==e?e:""}),Ke()},wt=(0,b.tZ)("form",{onSubmit:Pe(Je),children:(0,b.tZ)(ae.Qr,{name:"comment",control:De,rules:{required:!0},render:function(e){var t=e.field;return(0,b.tZ)(Be,{mode:"edit",id:"".concat(v,"-editor"),disableCommentButton:ut,disableCancelButton:dt,disableInput:pt,ref:t.ref,value:t.value,onChange:t.onChange,onCancelHandler:yt})}})}),gt=function(){var e=(0,i.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({commentId:v,count:t});case 2:if(r=e.sent,!(n=r.error)){e.next=7;break}return(0,f.C)("error",n.message),e.abrupt("return");case 7:z({postId:L,commentId:v,source:w,user:l});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=(0,c.useMemo)((function(){return Ve(e)}),[I,oe]),xt=(0,b.tZ)(at,{disabled:ot,onClick:function(){l?J?Xe():Ne("start"):ke()}}),kt=(0,b.tZ)(Ct,{isLoading:xe,getReactions:function(){return{totalReactionsByCurrentUser:C,totalReactions:S}},onReact:function(){R(v)},saveReactionsCount:gt});return(0,b.BX)(b.HY,{children:[(0,b.BX)("div",{css:Ut,children:[tt&&(0,b.tZ)(h.p89,Tt(Tt({likes:kt,reply:xt,highlight:k},vt),{},{moreOptions:(0,b.tZ)(Zt,{canEditComment:pe,canDeleteComment:he,canUnlikeComment:ft,disableMoreOptionsButton:it,onDeleteComment:Qe,onReportComment:function(){requestAnimationFrame((function(){m({postId:L,commentId:v})}))},onUnlikeComment:$e,onEditComment:function(){Le(),Ge("edit")}})})),et&&wt,He&&bt,le&&(0,b.tZ)("div",{css:Ft,children:(0,b.tZ)(h.zxk,{onClick:function(){W((function(e){return!e}))},size:"sm",appearance:"link-slate",children:(0,b.BX)("div",{css:Nt,children:[(0,b.BX)("span",{css:Lt,children:[Y?"Hide":"Show"," replies"]}),Y?(0,b.tZ)(h.Kh3,{size:"md"}):(0,b.tZ)(h._ME,{size:"md"})]})})})]}),ye&&(0,b.tZ)(Mt,{children:oe.map((function(e){var t=re===e.id,r=e.author,n="@[".concat(r.name,"](@").concat(r.username,")");return(0,b.tZ)(Dt,Tt(Tt({},e),{},{onReplyClick:function(){return e=n,void(l?Xe(e):ke());var e},commentId:v,disableInteraction:mt,highlight:t}),e.id)}))}),qe&&bt]})};function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Vt={name:"viuwgv",styles:"display:flex;align-items:center;gap:0.375rem"},Yt={name:"h9aq5x",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:500"},Wt=function(){var e=ie(),t=e.post,r=e.updateComments,n=e.updateSortType,o=e.sortType,i=(0,u.Z)(),a=i.data,s=i.isValidating,l=(null===t||void 0===t?void 0:t._id.toString())||"",d=o===B.YqU.Top,p=o===B.YqU.Recent,m=d?"Top comments":"Latest comments",f=(0,c.useState)(!1),y=f[0],w=f[1],g=(0,F.aM)({query:B.pH0,variables:{postId:l,commentsSortBy:o,commentsFirst:50},requestPolicy:a?"network-only":"cache-first",pause:s||!y,context:(0,c.useMemo)((function(){return{fetchOptions:{headers:(0,le.IT)({byPassCache:!!a})}}}),[a])}),x=(0,U.Z)(g,1)[0].data;return(0,c.useEffect)((function(){var e,t=null===x||void 0===x||null===(e=x.post)||void 0===e?void 0:e.comments;if(t){var n=(0,A.Z)((0,v.uh)(t));r(n)}}),[x]),(0,b.BX)(h.h_2,{children:[(0,b.tZ)(h.$FS,{children:(0,b.tZ)(h.zxk,{size:"xs",appearance:"tertiary-slate",children:(0,b.BX)("div",{css:Vt,children:[(0,b.tZ)("span",{css:Yt,children:m}),(0,b.tZ)(h._ME,{size:"sm"})]})})}),(0,b.BX)(h.AWV,{hideWhenDetached:!0,sideOffset:10,align:"end",children:[(0,b.tZ)(h.O3W,qt({onClick:function(){d||n(B.YqU.Top)},text:"Top comments"},d&&{endIcon:h.gYJ})),(0,b.tZ)(h.O3W,qt({onClick:function(){p||(w(!0),n(B.YqU.Recent))},text:"Latest comments"},p&&{endIcon:h.gYJ}))]})]})},Gt={name:"dhj7ib",styles:"display:flex;flex-direction:column;gap:1.25rem"},Kt=function(e){var t=e.children;return(0,b.tZ)("div",{css:Gt,children:t})},Jt=ce.z.object({comment:ce.z.string().min(1,"Comment must contain at least 1 character")}),Qt={name:"g8q9qy",styles:"margin-top:0.25rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.75rem;border-top-width:1px;--tw-border-opacity:1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding-top:2rem;padding-bottom:1rem;.dark &{border-color:rgb(39 39 42 / 0.8);}"},$t={name:"1d2pxt5",styles:"border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(244 244 245 / var(--tw-bg-opacity));padding:0.625rem;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));.dark &{--tw-bg-opacity:1;background-color:rgb(39 39 42 / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));}"},er={name:"1icvzg7",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.25rem"},tr={name:"884mo3",styles:"font-weight:600;--tw-text-opacity:1;color:rgb(63 63 70 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}"},rr={name:"111z6n6",styles:"text-align:center;font-weight:400;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));}"},nr={name:"dhj7ib",styles:"display:flex;flex-direction:column;gap:1.25rem"},or={name:"1hbnofh",styles:"display:flex;flex-direction:column;gap:1rem;border-radius:0.75rem;border-width:1px;--tw-border-opacity:1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:1rem;.dark &{border-color:rgb(39 39 42 / 0.8);}:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgb(37 99 235 / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:#fff;}.dark &:focus{--tw-ring-offset-color:#27272a;}"},ir={name:"4ved3l",styles:"display:flex;align-items:center;gap:0.5rem"},ar={name:"2t18mx",styles:"display:flex;gap:0.75rem"},sr={name:"1vfhcql",styles:"object-fit:cover"},cr={name:"1ea09dw",styles:"width:100%;text-align:left;font-size:0.875rem;line-height:1.25rem;--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));}"},lr={name:"1e8udbp",styles:"display:flex;flex-direction:column;gap:1.5rem"},ur={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},dr={name:"130zjmz",styles:"font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity:1;color:rgb(63 63 70 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}"},pr={name:"4zk4ri",styles:"display:flex;flex-direction:column;gap:1rem"},mr={name:"4zk4ri",styles:"display:flex;flex-direction:column;gap:1rem"},fr={name:"258xbh",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:2rem;.dark &{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}"},hr={name:"9czf6p",styles:"margin-left:1.5rem;display:flex;@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;flex-direction:column;gap:1rem"},br={name:"258xbh",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:2rem;.dark &{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}"},yr={name:"258xbh",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:2rem;.dark &{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}"},wr={name:"258xbh",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:2rem;.dark &{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}"},gr={name:"258xbh",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;--tw-bg-opacity:1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:2rem;.dark &{--tw-bg-opacity:1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));}"},vr={name:"y9jx00",styles:"width:10rem"},xr={name:"1ipzj64",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.75rem;padding-top:1rem;padding-bottom:1rem"},kr={name:"1d2pxt5",styles:"border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(244 244 245 / var(--tw-bg-opacity));padding:0.625rem;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));.dark &{--tw-bg-opacity:1;background-color:rgb(39 39 42 / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));}"},Or={name:"1icvzg7",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.25rem"},Ir={name:"884mo3",styles:"font-weight:600;--tw-text-opacity:1;color:rgb(63 63 70 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}"},Cr={name:"ywjy6t",styles:"font-weight:400;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(161 161 170 / var(--tw-text-opacity));}"},Sr=function(){var e=(0,u.Z)(),t=e.data,r=e.isValidating;!function(){var e,t=(0,d.useRouter)().pathname.startsWith("/discussions/"),r=t?50:2,n=t?50:0,o=(0,u.Z)(),i=o.data,a=o.isValidating,s=ie(),l=s.comments,p=s.updateComments,m=s.post,f=s.loading,h=s.sortType,b=null!==(e=null===m||void 0===m?void 0:m._id.toString())&&void 0!==e?e:"",y=me().setStatusMap,w=(0,F.aM)({query:B.MY6,variables:{postId:b,commentsSortBy:h,commentsFirst:r,repliesFirst:n},pause:!i||f,requestPolicy:"network-only",context:(0,c.useMemo)((function(){return{fetchOptions:{headers:(0,le.IT)({byPassCache:!0}),credentials:"include"}}}),[])}),g=(0,U.Z)(w,1)[0],v=g.data,x=g.fetching,k=g.error;(0,c.useEffect)((function(){a?y({postId:b,status:"loading"}):i||y({postId:b,status:"idle"})}),[a,i]),(0,c.useEffect)((function(){x&&y({postId:b,status:"loading"}),k&&y({postId:b,status:"error"})}),[x,k]),(0,c.useEffect)((function(){var e,t=null===v||void 0===v||null===(e=v.post)||void 0===e?void 0:e.comments;if(t&&l){var r=t.edges.map((function(e){var t=e.node;return pe(pe({},t),{},{replies:t.replies.edges.map((function(e){return e.node}))})})),n=l.map((function(e){var t=r.find((function(t){return t.id===e.id}));return t?pe(pe({},e),{},{totalReactions:t.totalReactions,myTotalReactions:t.myTotalReactions,replies:e.replies.map((function(e){var r=t.replies.find((function(t){return t.id===e.id}));return r?pe(pe({},e),{},{totalReactions:r.totalReactions,myTotalReactions:r.myTotalReactions}):e}))}):e}));p(n),y({postId:b,status:"success"})}}),[v])}();var n=ie(),o=n.comments,a=n.commentsCount,l=n.addComment,p=n.post,m=n.loading,f=null===p||void 0===p?void 0:p._id.toString(),y=(0,d.useRouter)(),w=fe(),g=1===a?"".concat(a," comment"):"".concat((0,S.sy)(a)," comments"),v=y.pathname,k=P(v),O=k&&a>2,I=!k,E=be(),_=E.id,j=E.setId,D=(0,Ue._)().open,T=(0,c.useState)("view"),z=T[0],M=T[1],A="add"===z,N="view"===z,L=(null===t||void 0===t?void 0:t.photo)||C.IZ,X=null===t||void 0===t?void 0:t.name,H=(0,ae.cI)({resolver:(0,se.F)(Jt),mode:"onChange",defaultValues:{comment:""}}),q=H.handleSubmit,V=H.control,Y=H.reset,W=H.formState,G=W.isValid,K=W.isSubmitting,J=function(){Y(),M("view")},Q=function(){var e=(0,i.Z)(s().mark((function e(r){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.comment,e.prev=1,e.next=4,l(n);case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return");case 7:j(o.id),J(),R({postId:f,commentId:o.id,source:w,user:t}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),$=K||!G||r,ee=K||r,te=K||r,re=function(e){return"".concat(e,"_add_comment_button")}(f);return p.disableComments?(0,b.tZ)(Kt,{children:(0,b.BX)("div",{css:Qt,children:[(0,b.tZ)("div",{css:$t,children:(0,b.tZ)(h.IEi,{size:"lg"})}),(0,b.BX)("div",{css:er,children:[(0,b.tZ)("div",{css:tr,children:"Comments disabled"}),(0,b.tZ)("div",{css:rr,children:"The comments have been disabled by the author for this article."})]})]})}):(0,b.BX)("div",{css:nr,children:[N&&(0,b.tZ)("button",{id:re,disabled:r,type:"button",onClick:function(){t?M("add"):D()},css:or,children:(0,b.BX)("div",{css:ir,children:[(0,b.tZ)("div",{css:ar,children:(0,b.tZ)(h.qEK,{size:"sm",children:(0,b.tZ)(h.mi6,{fill:!0,className:"object-cover",src:(0,x.resizeImage)(L,{w:124,h:124,c:"face"}),css:sr,alt:X||"Default profile photo"})})}),(0,b.tZ)("span",{css:cr,children:"Add a thoughtful comment"})]})}),A&&(0,b.tZ)("form",{onSubmit:q(Q),children:(0,b.tZ)(ae.Qr,{name:"comment",control:V,rules:{required:!0},render:function(e){var t=e.field;return(0,b.tZ)(Be,{disableCommentButton:$,disableCancelButton:ee,disableInput:te,ref:t.ref,value:t.value,onChange:t.onChange,onCancelHandler:J})}})}),a>0?(0,b.BX)("div",{css:lr,children:[(0,b.BX)("div",{css:ur,children:[(0,b.tZ)("h2",{css:dr,children:g}),I&&(0,b.tZ)(Wt,{})]}),(0,b.BX)("div",{css:pr,children:[(0,b.tZ)(Kt,{children:m?(0,b.BX)("div",{css:mr,children:[(0,b.tZ)("div",{css:fr}),(0,b.BX)("div",{css:hr,children:[(0,b.tZ)("div",{css:br}),(0,b.tZ)("div",{css:yr})]}),(0,b.tZ)("div",{css:wr}),(0,b.tZ)("div",{css:gr})]}):Array.isArray(o)&&o.map((function(e){var t=_===e.id;return(0,b.tZ)(Xt,qt(qt({},e),{},{highlight:t}),e.id)}))}),O&&(0,b.tZ)("div",{css:vr,children:(0,b.tZ)(h.zxk,{size:"sm",appearance:"tertiary-slate",asChild:!0,children:(0,b.tZ)(h.Xlt,{href:"/discussions/post/".concat(f,"?source=").concat(Z.L.VIEW_ALL_COMMENTS_DISCUSSIONS_FEED),children:"See all comments"})})})]})]}):(0,b.BX)("div",{css:xr,children:[(0,b.tZ)("div",{css:kr,children:(0,b.tZ)(h.IEi,{size:"lg"})}),(0,b.BX)("div",{css:Or,children:[(0,b.tZ)("div",{css:Ir,children:"No comments yet"}),(0,b.tZ)("div",{css:Cr,children:"Be the first to start the conversation."})]})]})]})};function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _r=function(e,t,r){return"personalized"===e?{feedType:e,ruleBaseFeedEnabled:t,isFeatured:r,version:t?.6:void 0}:{feedType:e}},jr={name:"1vfhcql",styles:"object-fit:cover"},Pr={name:"1vfhcql",styles:"object-fit:cover"},Dr={name:"ac4md2",styles:"border-radius:9999px;:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgb(37 99 235 / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:#fff;}.dark &:focus{--tw-ring-offset-color:#27272a;}"},Rr={name:"5eln6m",styles:"border-radius:0.75rem;@media (min-width: 768px){border-radius:0.5rem;}"},Tr=function(e){var t,r,n,i,a,s,c=e.post,l=e.index,p=e.currentFeedType,f=e.ruleBaseFeedEnabled,y=e.switchToFeaturedFeed,O=(0,u.Z)().data,E=(0,d.useRouter)().pathname,_=j(E),D=P(E),R=_||D,T=_?"top":"default",z=(0,v.dt)(c),M=O&&z.partOfPublication&&z.publication.domain&&!z.publication.isHeadless?"".concat((0,k.lL)(z.publication),"/verify?next=").concat((0,k.U_)(z,z.publication)):(0,k.U_)(z,z.publication),A=I()().diff(I()(z.dateAdded),"hours")<=23?I()(z.dateAdded).fromNow():I()(z.dateAdded).format("MMM D, YYYY"),B=(0,k.Z8)(z.publication),U=z.isAnonymous?M:"/@".concat(z.author.username,"?source=feed-profile-clicked"),F=(0,k.lL)(z.publication),N=z.author.photo&&""!==z.author.photo?(0,b.tZ)(h.mi6,{alt:z.author.name,src:(0,x.resizeImage)(z.author.photo,{w:124,h:124,c:"face"}),fill:!0,css:jr}):(0,b.tZ)(h.mi6,{alt:z.author.name,src:C.IZ,fill:!0,css:Pr}),L=(0,x.resizeImage)((null===(t=z.publication)||void 0===t?void 0:t.favicon)||"https://cdn.hashnode.com/res/hashnode/image/upload/v1655710917204/_cHQMSjt3.png",{w:100,h:100}),X={config:{showDiscussingAvatars:!R,showDiscussionsFooter:!0,coverImagePosition:T},authorName:null===(r=z.author)||void 0===r?void 0:r.name,authorUrl:U,publicationUrl:F,publicationIsTeam:(s=z.publication,(s.publicMembersCount||0)>1),publicationLogo:L,publicationTitle:null===(n=z.publication)||void 0===n?void 0:n.title,publicationHostName:B,postUrl:M,postDateAdded:A,postIsPartOfPublication:z.partOfPublication&&!!z.publication,postTitle:z.title,postBrief:z.brief,postIsFeatured:z.isFeatured,tagName:z.tags&&z.tags.length?z.tags[0].name:"",tagSlug:z.tags&&z.tags.length?z.tags[0].slug:"",seriesName:null===(i=z.series)||void 0===i?void 0:i.name,seriesUrl:z.series&&z.publication?(0,k.Gz)(z.series,z.publication):"",postLikesCount:(0,S.sy)(z.totalReactions),postLikesCountText:(0,S.uv)({count:z.totalReactions,singularTerm:"like",pluralTerm:"likes"}),postCommentsCount:(0,S.sy)(z.responseCount>0?(z.responseCount||0)+(z.replyCount||0):0)||"",postReadsCount:Number(z.views)>25?(0,S.sy)(z.views):"",bookmark:(0,b.tZ)(w,{post:z}),avatar:(0,b.tZ)(h.Xlt,{href:U,css:Dr,children:(0,b.tZ)(h.qEK,{size:"md",shape:"circle",children:(0,b.tZ)(g.Z,{userId:null===(a=z.author._id)||void 0===a?void 0:a.toString(),closeOnClick:!0,children:N})})}),coverImage:z.coverImage?(0,b.tZ)(b.HY,{children:z.coverImage.includes("cdn.hashnode.com")?(0,b.tZ)(o.Z,{originalSrc:z.coverImage,src:(0,x.resizeImage)(z.coverImage,{w:1600,h:840,c:"thumb"}),layout:"fill",objectFit:"cover",placeholder:"blur",blurDataURL:(0,x.getBlurHash)((0,x.resizeImage)(z.coverImage,{w:1600,h:840,c:"thumb"})),alt:z.title,css:Rr}):(0,b.tZ)("div",{style:{display:"inline-block",width:"100%",height:"100%",maxHeight:"100%",backgroundImage:"url(".concat(z.coverImage,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"}})}):null,comments:R?(0,b.tZ)(oe,{post:z,children:(0,b.tZ)(Sr,{})}):null,onPostClick:function(){var e={event_type:_?Z.F.DISCUSSION_POST_CLICKED:Z.F.FEED_POST_CLICKED,time:(new Date).getTime(),event_properties:Er({post:c._id,isFeatured:!!c.isFeatured},!_&&Er(Er({postPosition:l},_r(p,f,c.isFeatured)),{},{ruleBaseFeedEnabled:f}))};O&&(e.user_id=null===O||void 0===O?void 0:O._id,e.user_properties={username:null===O||void 0===O?void 0:O.username,email:null===O||void 0===O?void 0:O.email,photo:(null===O||void 0===O?void 0:O.photo)||"",dateJoined:(null===O||void 0===O?void 0:O.dateJoined)||""}),(0,m.e)().sendEventToAmplitude(e)},onSeriesBadgeClick:function(){var e,t={user_id:O._id,event_type:_?Z.F.DISCUSSION_POST_SERIES_CLICKED:Z.F.FEED_SERIES_CLICKED,time:(new Date).getTime(),event_properties:{post:c._id,series:null===(e=c.series)||void 0===e?void 0:e._id}};(0,m.e)().sendEventToAmplitude(t)},onFeaturedBadgeClick:y,onLikeClick:function(){if(!R){var e={event_type:"liked_feed_article",time:(new Date).getTime(),event_properties:{post:c._id}};O&&(e.user_id=null===O||void 0===O?void 0:O._id,e.user_properties={username:null===O||void 0===O?void 0:O.username,email:null===O||void 0===O?void 0:O.email,photo:(null===O||void 0===O?void 0:O.photo)||"",dateJoined:(null===O||void 0===O?void 0:O.dateJoined)||""}),(0,m.e)().sendEventToAmplitude(e)}}};return(0,b.tZ)(h.BvG,Er({},X))},zr=c.memo(Tr)},34615:function(e,t,r){r.d(t,{u:function(){return Y},V:function(){return O}});var n=r(59499),o=r(50029),i=r(64687),a=r.n(i),s=r(67294),c=r(6112),l=r(41507),u=r(1604),d=r(87536),p=r(56312),m=r(64529),f=r(73658),h=r(28276),b=r(44160),y=r(9605),w=function(e){switch(e){case"comment":default:return"response";case"reply":return"reply"}},g=r(35944);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=[{id:"reason-1",value:"It\u2019s spam"},{id:"reason-2",value:"It\u2019s abusive"},{id:"reason-3",value:"I am not interested"},{id:"reason-4",value:"This should not be on Hashnode"},{id:"reason-5",value:"Other"}],O=(0,m.Ue)((function(e){return{show:!1,postId:null,commentId:null,replyId:null,type:"comment",openComment:function(t){var r=t.postId,n=t.commentId;return e({show:!0,postId:r,commentId:n,type:"comment"})},openReply:function(t){var r=t.postId,n=t.commentId,o=t.replyId;return e({show:!0,postId:r,commentId:n,replyId:o,type:"reply"})},close:function(){return e({show:!1,commentId:null,replyId:null,postId:null,type:"comment"})}}})),I=u.z.object({reason:u.z.string().min(1,"Please provide a reason"),detailedReason:u.z.string().optional()}),C={name:"8iqgu",styles:"position:fixed;top:0px;right:0px;bottom:0px;left:0px;z-index:50;background-color:rgb(24 24 27 / 0.5);.dark &{background-color:rgb(82 82 91 / 0.5);}"},S={name:"1p0sl3t",styles:"position:fixed;top:50%;left:50%;z-index:50;display:flex;height:fit-content;width:335px;--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-translate-y:-50%;flex-direction:column;overflow:auto;border-radius:0.75rem;--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);.dark &{--tw-bg-opacity:1;background-color:rgb(9 9 11 / var(--tw-bg-opacity));}@media (min-width: 640px){width:488px;}"},Z={name:"eld48b",styles:"display:flex;flex-direction:column;gap:0.25rem;padding-left:1.5rem;padding-right:1.5rem;padding-top:1.25rem;padding-bottom:1.5rem"},E={name:"15xggpi",styles:'font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity:1;color:rgb(63 63 70 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}'},_={name:"1ln9i3z",styles:"--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}"},j={name:"st1s6",styles:"display:flex;flex-direction:column;gap:1rem;padding-left:1.5rem;padding-right:1.5rem;@media (min-width: 640px){padding-left:2rem;padding-right:2rem;}"},P={name:"b49jb2",styles:"font-weight:500;--tw-text-opacity:1;color:rgb(63 63 70 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}"},D={name:"dhj7ib",styles:"display:flex;flex-direction:column;gap:1.25rem"},R={name:"1ji481z",styles:"border-radius:0.75rem;--tw-text-opacity:1;color:rgb(113 113 122 / var(--tw-text-opacity));:focus{outline:2px solid transparent;outline-offset:2px;}.dark &{--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}"},T={name:"4ved3l",styles:"display:flex;align-items:center;gap:0.5rem"},z={name:"1xg99rn",styles:"left:0px;border-radius:9999px;--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity))"},M={name:"18hrgal",styles:"border-radius:0.75rem;border-width:1px;--tw-border-opacity:1;border-color:rgb(212 212 216 / var(--tw-border-opacity));padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:0.75rem;.dark &{--tw-border-opacity:1;border-color:rgb(39 39 42 / var(--tw-border-opacity));}"},A={name:"gptadt",styles:"width:100%;resize:none;background-color:transparent;--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));::placeholder{--tw-placeholder-opacity:1;color:rgb(161 161 170 / var(--tw-placeholder-opacity));}:focus{outline:2px solid transparent;outline-offset:2px;}.dark &{--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}.dark &::placeholder{--tw-placeholder-opacity:1;color:rgb(113 113 122 / var(--tw-placeholder-opacity));}"},B={name:"tx0v38",styles:"display:flex;justify-content:space-between;padding:1.5rem"},U={name:"dwt8ks",styles:"position:absolute;top:0.75rem;right:0.75rem;z-index:50"},F={name:"epktxp",styles:"padding-left:1.5rem;padding-right:1.5rem;padding-top:1.25rem"},N={name:"qwlz6k",styles:"display:flex;flex-direction:column;align-items:center;gap:0.75rem"},L={name:"1w455re",styles:"border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(255 247 237 / var(--tw-bg-opacity));padding:0.5rem;--tw-text-opacity:1;color:rgb(234 88 12 / var(--tw-text-opacity));.dark &{background-color:rgb(67 20 7 / 0.5);--tw-text-opacity:1;color:rgb(249 115 22 / var(--tw-text-opacity));}"},X={name:"1b7qg9z",styles:"display:flex;flex-direction:column;gap:0.25rem;text-align:center"},H={name:"15xggpi",styles:'font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity:1;color:rgb(63 63 70 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}'},q={name:"1ln9i3z",styles:"--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}"},V={name:"7l1iqv",styles:"display:flex;justify-content:center;padding-top:1.25rem;padding-left:1.5rem;padding-bottom:1.5rem;padding-right:1.5rem"},Y=function(){var e=(0,d.cI)({resolver:(0,p.F)(I),mode:"onChange",defaultValues:{reason:k[0].value,detailedReason:""}}),t=e.register,r=e.handleSubmit,n=e.control,i=e.reset,u=e.setValue,m=e.formState,v=m.isValid,Y=m.isSubmitting,W=m.isSubmitSuccessful;(0,s.useEffect)((function(){W&&i()}),[W,i]);var G=O(),K=G.show,J=G.close,Q=G.postId,$=G.commentId,ee=G.replyId,te=G.type,re=(0,s.useState)(!1),ne=re[0],oe=re[1],ie=function(){var e=(0,y.D)().mutation,t=function(){var t=(0,o.Z)(a().mark((function t(r){var n,o,i,s,c,l,u,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.postId,o=r.commentId,i=r.replyId,s=r.reason,c=r.type,t.next=3,e({url:"/ajax/post/report",body:{postId:n,replyId:i,responseId:o,reason:s,type:w(c)},mapper:function(){return null}});case 3:return l=t.sent,u=l.data,d=l.error,t.abrupt("return",{data:u,error:d});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var e=(0,o.Z)(a().mark((function e(r){var n,o,i,s,c,l,u,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.postId,o=r.commentId,i=r.replyId,s=r.reason,c=r.type,e.next=3,t({postId:n,commentId:o,replyId:i,reason:s,type:c});case 3:return l=e.sent,u=l.data,d=l.error,e.abrupt("return",{data:u,error:d});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{reportComment:r}}(),ae=ie.reportComment,se=(0,d.qo)({control:n,name:"reason"}),ce=(0,d.qo)({control:n,name:"detailedReason"}),le=Y,ue="Other"===se,de=!v||Y||ue&&!!!ce,pe=function(){le||(oe(!1),i(),J())},me=function(){var e=(0,o.Z)(a().mark((function e(t){var r,n,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q&&$){e.next=2;break}return e.abrupt("return",(0,b.C)("error","Something went wrong, please refresh the page"));case 2:return r=t.reason,n=t.detailedReason,o=ue&&null!==n&&void 0!==n?n:r,e.next=6,ae(x(x({postId:Q,commentId:$},ee&&{replyId:ee}),{},{type:te,reason:o}));case 6:if(i=e.sent,!(s=i.error)){e.next=12;break}return pe(),(0,b.C)("error",s.message),e.abrupt("return");case 12:oe(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.tZ)(c.fC,{open:K,children:(0,g.BX)(c.h_,{children:[(0,g.tZ)(c.aV,{css:C}),(0,g.tZ)(c.VY,{onEscapeKeyDown:pe,css:S,children:ne?(0,g.BX)("div",{children:[(0,g.tZ)("div",{css:F,children:(0,g.BX)("div",{css:N,children:[(0,g.tZ)("div",{css:L,children:(0,g.tZ)(l.diB,{size:"lg"})}),(0,g.BX)("div",{css:X,children:[(0,g.tZ)(c.Dx,{css:H,children:"Thank you for submitting a report"}),(0,g.tZ)(c.dk,{css:q,children:"Our team has been notified and we will send you an update concerning the status of your report."})]})]})}),(0,g.tZ)("div",{css:V,children:(0,g.tZ)(l.zxk,{onClick:pe,size:"sm",appearance:"primary",children:"Close"})})]}):(0,g.BX)("div",{children:[(0,g.BX)("div",{css:Z,children:[(0,g.tZ)(c.Dx,{asChild:!0,children:(0,g.tZ)("h2",{css:E,children:"Report this comment"})}),(0,g.tZ)(c.dk,{asChild:!0,children:(0,g.tZ)("p",{css:_,children:"Your feedback is anonymous"})})]}),(0,g.BX)("form",{onSubmit:r(me),children:[(0,g.BX)("div",{css:j,children:[(0,g.tZ)("p",{css:P,children:"Why are you reporting this?"}),(0,g.tZ)(f.fC,{value:se,onValueChange:function(e){return u("reason",e,{shouldValidate:!0})},css:D,children:k.map((function(e){var t=e.id,r=e.value,n=se===r;return(0,g.tZ)(f.ck,{id:t,css:R,value:r,children:(0,g.BX)("div",{css:T,children:[(0,g.BX)("div",{children:[!n&&(0,g.tZ)(l.Awu,{size:"md"}),(0,g.tZ)(f.z$,{css:z,children:(0,g.tZ)(l.fU8,{size:"md",solid:!0})})]}),(0,g.tZ)("label",{htmlFor:t,children:r})]})},t)}))}),ue&&(0,g.tZ)("div",{css:M,children:(0,g.tZ)(h.Z,x({autoFocus:!0,placeholder:"Describe your reason",minRows:3,disabled:le,css:A},t("detailedReason")))})]}),(0,g.BX)("div",{css:B,children:[(0,g.tZ)(l.zxk,{disabled:le,onClick:pe,size:"sm",appearance:"tertiary-slate",children:"Cancel"}),(0,g.tZ)(l.zxk,{disabled:de,size:"sm",appearance:"primary",children:"Submit"})]})]}),(0,g.tZ)(c.x8,{asChild:!0,css:U,children:(0,g.tZ)(l.hU,{disabled:le,size:"lg",Icon:l.X,onClick:pe})})]})})]})})}},9605:function(e,t,r){r.d(t,{D:function(){return g}});var n=r(50029),o=r(64687),i=r.n(o),a=r(82262),s=r(92777),c=r(81531),l=r(63553),u=r(37247),d=r(90607);function p(e,t,r){return p=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&(0,d.Z)(o,r.prototype),o},p.apply(null,arguments)}function m(e){var t="function"===typeof Map?new Map:void 0;return m=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,(0,u.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,d.Z)(n,e)},m(e)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.Z)(this,r)}}var h=function(e){(0,c.Z)(r,e);var t=f(r);function r(e,n){var o;return(0,s.Z)(this,r),(o=t.call(this,e)).status=n,o}return(0,a.Z)(r)}(m(Error)),b=h,y=function(){if(!window.navigator.onLine)throw new h("Not connected to the internet, please try again",500)},w=function(){var e=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===t||void 0===t||null===(r=t.json)||void 0===r?void 0:r.call(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=function(){var e=(0,n.Z)(i().mark((function e(t){var r,n,o,a,s,c,l,u,d,p,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.body,o=t.mapper,a=void 0===o?function(){return null}:o,s=null,c=null,e.prev=3,y(),e.next=7,fetch(r,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},credentials:"same-origin"});case 7:if((l=e.sent).ok){e.next=13;break}return e.next=11,w(l);case 11:throw u=e.sent,new b(null===u||void 0===u?void 0:u.err,l.status);case 13:return e.next=15,w(l);case 15:return d=e.sent,p=a(d),e.abrupt("return",{data:p,error:c});case 20:return e.prev=20,e.t0=e.catch(3),e.abrupt("return",{data:s,error:{status:null!==(m=e.t0.status)&&void 0!==m?m:500,message:e.t0.message||"Something went wrong, please try again later"}});case 23:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t){return e.apply(this,arguments)}}();return{mutation:e}}},30384:function(e,t,r){r.d(t,{X:function(){return Z},_:function(){return p}});var n=r(6112),o=r(41507),i=r(36808),a=r.n(i),s=r(64529),c=r(11163),l=r(57890),u=r(35944);var d=function(){return(0,u.tZ)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.tZ)("path",{d:"M15.7285 7.80346C15.0655 7.19551 13.9028 6.46802 12.1792 6.46802C9.75189 6.46802 7.69173 8.03253 6.94705 10.195C6.76346 10.753 6.65133 11.3513 6.65133 11.9692C6.65133 12.587 6.76348 13.185 6.95726 13.7431C7.69167 15.9056 9.7518 17.4703 12.1792 17.4703C13.5459 17.4703 14.5862 17.1015 15.3613 16.5734C16.5852 15.7363 17.136 14.4906 17.238 13.6634H12.1792V10.335H20.7975C20.9301 10.893 20.9913 11.4312 20.9913 12.1686C20.9913 14.8992 19.9918 17.2013 18.2579 18.7659C16.7382 20.1411 14.6575 20.9384 12.1792 20.9384C8.58904 20.9384 5.48847 18.9252 3.979 15.9954C3.3569 14.7796 3 13.4142 3 11.9692C3 10.5242 3.35698 9.15886 3.9791 7.94304C5.48857 5.01316 8.58904 3 12.1792 3C14.6576 3 16.7281 3.88695 18.3191 5.33196L15.7285 7.80346Z",fill:"white"})})},p=(0,s.Ue)((function(e){return{show:!1,open:function(){return e({show:!0})},close:function(){return e({show:!1})}}})),m={name:"1pbk2hc",styles:"position:fixed;top:0px;bottom:0px;left:0px;right:0px;z-index:50;display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:0.5;background-color:rgb(24 24 27 / var(--tw-bg-opacity));.dark &{--tw-bg-opacity:0.5;background-color:rgb(82 82 91 / var(--tw-bg-opacity));}"},f={name:"32orhe",styles:"position:fixed;top:50%;left:50%;z-index:50;display:flex;width:335px;--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-translate-y:-50%;flex-direction:column;gap:1.5rem;border-radius:0.75rem;--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding-top:0px;padding-bottom:0px;:focus{outline:2px solid transparent;outline-offset:2px;}.dark &{--tw-bg-opacity:1;background-color:rgb(9 9 11 / var(--tw-bg-opacity));}@media (min-width: 640px){width:488px;}"},h={name:"79jczr",styles:"display:flex;flex-direction:column;gap:1.25rem;padding-left:1.5rem;padding-right:1.5rem;padding-top:1.75rem;padding-bottom:2.25rem;@media (min-width: 640px){padding-left:52px;padding-right:52px;}"},b={name:"zl1inp",styles:"display:flex;justify-content:center"},y={name:"za6pc8",styles:"height:2.25rem;width:2.25rem;fill:currentColor;--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(250 250 250 / var(--tw-text-opacity));}"},w={name:"1kdaoj4",styles:"display:flex;flex-direction:column;align-items:center;gap:1.5rem"},g={name:"p5tmle",styles:"display:flex;flex-direction:column;gap:0.5rem"},v={name:"1x0mf33",styles:'text-align:center;font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1.25rem;line-height:1.75rem;font-weight:600;--tw-text-opacity:1;color:rgb(63 63 70 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(228 228 231 / var(--tw-text-opacity));}'},x={name:"1hu9cti",styles:"text-align:center;--tw-text-opacity:1;color:rgb(82 82 91 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(212 212 216 / var(--tw-text-opacity));}"},k={name:"10ziyvl",styles:"display:flex;width:100%;flex-direction:column;gap:0.75rem"},O={name:"aj6rbz",styles:"display:flex;gap:0.5rem"},I={name:"f3vz0n",styles:"font-weight:500"},C={name:"f3vz0n",styles:"font-weight:500"},S={name:"61ureo",styles:"position:absolute;right:0.75rem;top:0.75rem"},Z=function(){var e=(0,c.useRouter)().asPath.split("?")[0],t=p(),r=t.show,i=t.close,s="/onboard?next=".concat(e,"&skip-onboarding=true"),Z=function(){i()};return(0,u.tZ)(n.fC,{open:r,children:(0,u.BX)(n.h_,{children:[(0,u.tZ)(n.aV,{css:m,onClick:Z}),(0,u.BX)(n.VY,{onEscapeKeyDown:Z,css:f,children:[(0,u.BX)("div",{css:h,children:[(0,u.tZ)("div",{css:b,children:(0,u.tZ)(o.Xlt,{href:"/",target:"_blank",children:(0,u.tZ)(l.Z,{css:y})})}),(0,u.BX)("div",{css:w,children:[(0,u.BX)("div",{css:g,children:[(0,u.tZ)(n.Dx,{asChild:!0,children:(0,u.tZ)("h2",{css:v,children:"Sign in to Hashnode"})}),(0,u.tZ)(n.dk,{asChild:!0,children:(0,u.tZ)("p",{css:x,children:"Hey there, sign up or sign in to interact with the community on Hashnode"})})]}),(0,u.BX)("div",{css:k,children:[(0,u.tZ)(o.zxk,{onClick:function(t){if(window.parent===window){t.preventDefault();var r=new Date((new Date).getTime()+9e5);a().set("onboarding-skipped","true",{expires:r}),a().set("hn-next-url","".concat(e),{expires:r}),i(),window.location.href="/auth/google"}},width:"full",size:"md",appearance:"primary",children:(0,u.BX)("div",{css:O,children:[(0,u.tZ)(d,{}),(0,u.tZ)("span",{css:I,children:"Continue with Google"})]})}),(0,u.tZ)(o.zxk,{asChild:!0,width:"full",size:"md",appearance:"secondary-slate",children:(0,u.tZ)(o.Xlt,{href:s,onClick:function(){return i()},children:(0,u.tZ)("span",{css:C,children:"More options"})})})]})]})]}),(0,u.tZ)("div",{css:S,children:(0,u.tZ)(n.x8,{asChild:!0,children:(0,u.tZ)(o.hU,{onClick:Z,size:"md",Icon:o.X})})})]})]})})}},55549:function(e,t,r){r.d(t,{Xk:function(){return u},dt:function(){return p},uh:function(){return d}});var n=r(59499),o=r(27484),i=r.n(o);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(e){var t;return s(s({},e),{},{partOfPublication:!0,cuid:null!==(t=e.cuid)&&void 0!==t?t:""})},l=function(e){var t,r,n,o,i,a,c,l;return s(s({},e),{},{publicMembersCount:e.publicMembers.totalDocuments,domain:null===(t=e.domainInfo.domain)||void 0===t?void 0:t.host,domainStatus:{certIssued:null!==(r=null===(n=e.domainInfo.domain)||void 0===n?void 0:n.ready)&&void 0!==r&&r,ready:null!==(o=null===(i=e.domainInfo.domain)||void 0===i?void 0:i.ready)&&void 0!==o&&o},favicon:null!==(a=e.favicon)&&void 0!==a?a:"",urlPattern:"SIMPLE"===e.urlPattern?"simple":"",username:null!==(c=e.domainInfo.hashnodeSubdomain)&&void 0!==c?c:void 0,isHeadless:null!==(l=e.isHeadless)&&void 0!==l&&l})},u=function(e){var t;return s(s({},e),{},{photo:null!==(t=e.photo)&&void 0!==t?t:""})},d=function(e){return e.edges.map((function(e){var t,r=e.node,n=r.replies;return s(s({},r),{},{myTotalReactions:0,author:u(r.author),replies:n?(t=n,t.edges.map((function(e){var t=e.node;return s(s({},t),{},{myTotalReactions:0,author:u(t.author)})}))):[]})}))},p=function(e){var t,r,n,o,a,p,m,f,h,b,y,w,g;return s(s({},e),{},{bookmarkedIn:e.bookmarked?["SAVED"]:[],author:u(e.author),dateAdded:i()(e.dateAdded).toDate(),brief:null!==(t=e.brief)&&void 0!==t?t:"",coverImage:null===(r=e.coverImage)||void 0===r?void 0:r.url,readTime:null!==(n=e.readTime)&&void 0!==n?n:0,publication:l(e.publication),contributors:e.contributors.map((function(e){var t;return{_id:e._id,user:s(s({},e),{},{photo:null!==(t=e.photo)&&void 0!==t?t:""})}})),commenters:e.commenters?(g=e.commenters,g.edges.map((function(e){var t,r=e.node;return s(s({},r),{},{photo:null!==(t=r.photo)&&void 0!==t?t:""})}))):void 0,cuid:null!==(o=e.cuid)&&void 0!==o?o:"",isAnonymous:!1,isCoverImagePortrait:null!==(a=null===(p=e.coverImage)||void 0===p?void 0:p.isPortrait)&&void 0!==a&&a,subtitle:null!==(m=e.subtitle)&&void 0!==m?m:"",comments:e.comments?d(e.comments):void 0,tags:(null===(f=e.tags)||void 0===f?void 0:f.map((function(e){return s({},e)})))||[],url:null!==(h=e.url)&&void 0!==h?h:"",partOfPublication:!0,series:e.series?c(e.series):null,views:null!==(b=e.views)&&void 0!==b?b:0,disableComments:null!==(y=null===(w=e.preferences)||void 0===w?void 0:w.disableComments)&&void 0!==y&&y})}},60999:function(e,t,r){var n=r(67294),o=r(79277);t.Z=function(e,t){void 0===e&&(e=!0);var r=(0,n.useCallback)((function(r){if("function"!==typeof e||e())return r.preventDefault(),t&&(r.returnValue=t),t}),[e,t]);(0,n.useEffect)((function(){if(e)return(0,o.on)(window,"beforeunload",r),function(){return(0,o.S1)(window,"beforeunload",r)}}),[e,r])}},82184:function(e,t,r){var n=r(67294),o=r(79277);t.Z=function(e,t,r){if(!o.jU)return[t,function(){}];var i=(0,n.useState)((function(){try{var n=sessionStorage.getItem(e);return"string"!==typeof n?(sessionStorage.setItem(e,r?String(t):JSON.stringify(t)),t):r?n:JSON.parse(n||"null")}catch(i){return t}})),a=i[0],s=i[1];return(0,n.useEffect)((function(){try{var t=r?String(a):JSON.stringify(a);sessionStorage.setItem(e,t)}catch(i){}})),[a,s]}},43575:function(e,t,r){r.d(t,{A:function(){return l},B:function(){return c}});var n=r(59499),o=r(78180);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={truncate:45,className:"autolinkedURL",replaceFn:function(e){if("mention"===e.getType()){var t=e.getMention();return'<a href="https://hashnode.com/@'.concat(t,'" class="user-mention" target="_blank" rel="noopener noreferrer">@').concat(t,"</a>")}return null}},c=function(e){return o.ZP.link(e,s)},l=function(e){return o.ZP.link(e,a(a({},s),{},{mention:"twitter"}))}},14142:function(e,t,r){r.d(t,{F:function(){return o},L:function(){return n}});var n={VISIT_BLOG:"visit_blog",VIEW_ALL_COMMENTS_DISCUSSIONS_FEED:"view_all_comments_discussions_feed",DISCUSSIONS_FEED:"discussions_feed",DISCUSSIONS_PAGE:"discussions_page",DISCUSS_FEED_CARD_READERS_DISCUSSING:"discuss_feed_card_readers_discussing",DISCUSS_FEED_CARD_TOP_COMMENT:"discuss_feed_card_top_comment",DISCUSS_FEED_CARD_BUTTON:"discuss_feed_card_button",DISCUSSION_PAGE_RECENT_ARTICLES_WIDGET:"discussion_page_recent_articles_widget",DISCUSSION_PAGE_AUTHOR_WIDGET:"discussion_page_author_widget",DISCUSSION_PAGE_TOP_DISCUSSIONS_WIDGET:"discussion_page_top_discussions_widget",TOP_DISCUSSIONS_FEED_WIDGET:"top_discussions_feed_widget",TOP_COMMENTERS:{WIDGET:"top_commenters_widget",PROFILE_VIEW:"top_commenters_profile_view"},IN_THIS_DISCUSSION:{WIDGET:"in_this_discussion_widget",PROFILE_VIEW:"in_this_discussion_profile_view"}},o={COMMENT_ADDED:"comment_added",REPLY_ADDED:"reply_added",LIKE_COMMENT:"like_comment",LIKE_REPLY:"like_reply",FOLLOW_USER_OR_BLOG:"follow_user_or_blog",DISCUSSION_POST_CLICKED:"discussion_post_clicked",DISCUSSION_POST_SERIES_CLICKED:"discussion_post_series_clicked",FEED_POST_CLICKED:"feed_post_clicked",FEED_SERIES_CLICKED:"feed_series_clicked",SCHEDULE_POST_CANCEL:"schedule_post_cancel",CUSTOM_DOMAIN_VERIFIED:"custom_domain_verified",ADD_CUSTOM_DOMAIN:"add_custom_domain",CREATE_BLOG_POST:"create_blog_post",RECOMMENDATION_ADDED:"recommendation_added",GITHUB_BACKUP_ALL_POSTS:"github_backup_all_posts",GITHUB_BACKUP_ALL_DRAFTS:"github_backup_all_drafts",DOCS_CHECKOUT_OPENED:"docs_checkout_opened"}},59162:function(e,t,r){t.__esModule=!0,t.default=void 0;var n=i(r(67294)),o=i(r(13854));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function s(e){var t=e.mode,r=e.onFixedToggle,i=e.hideOnBoundaryHit,s=e.offsetTransforms,c=e.disabled,l=e.boundaryElement,u=e.scrollElement,d=e.bottomOffset,p=e.topOffset,m=e.positionRecheckInterval,f=e.children,h=e.isIOSFixEnabled,b=e.dontUpdateHolderHeightWhenSticky,y=e.wrapperClassName,w=e.stickyClassName,g=e.stickyStyle,v=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["mode","onFixedToggle","hideOnBoundaryHit","offsetTransforms","disabled","boundaryElement","scrollElement","bottomOffset","topOffset","positionRecheckInterval","children","isIOSFixEnabled","dontUpdateHolderHeightWhenSticky","wrapperClassName","stickyClassName","stickyStyle"]);return n.default.createElement(o.default,{mode:t,onFixedToggle:r,hideOnBoundaryHit:i,offsetTransforms:s,disabled:c,boundaryElement:l,scrollElement:u,bottomOffset:d,topOffset:p,positionRecheckInterval:m,isIOSFixEnabled:h,dontUpdateHolderHeightWhenSticky:b},(function(e){var t=e.isFixed,r=e.wrapperStyles,o=e.wrapperRef,i=e.holderStyles,s=e.holderRef;return n.default.createElement("div",a({},v,{ref:s,style:i}),n.default.createElement("div",a({},v,{className:y+" "+(t?w:""),style:t?a({},r,g):r,ref:o}),f))}))}s.defaultProps={stickyClassName:"sticky",wrapperClassName:"",stickyStyle:{}};var c=s;t.default=c,e.exports=t.default},22442:function(e,t){t.__esModule=!0,t.listen=function(e,t,r){for(var n=0,i=t.length;n<i;n+=1)o(e,t[n],r)},t.unlisten=function(e,t,r){for(var n=0,o=t.length;n<o;n+=1)i(e,t[n],r)};var r=[],n=[];function o(e,t,o){var i=r.indexOf(e);-1===i&&(i=r.length,r.push(e),n.push(function(e){return{el:e,callbacks:{},realCallbacks:{},realListenersCnt:0}}(e))),function(e,t,r){e.callbacks[t]?-1===e.callbacks[t].indexOf(r)&&e.callbacks[t].push(r):(e.callbacks[t]=[r],e.realCallbacks[t]=function(r){for(var n=0,o=e.callbacks[t].length;n<o;n+=1)e.callbacks[t][n](r)},e.el.addEventListener(t,e.realCallbacks[t]),e.realListenersCnt+=1)}(n[i],t,o)}function i(e,t,o){var i=r.indexOf(e);if(-1!==i){var a=n[i];!function(e,t,r){if(e.callbacks[t]){var n=e.callbacks[t].indexOf(r);-1!==n&&(e.callbacks[t].splice(n,1),e.callbacks[t].length>0||(e.el.removeEventListener(t,e.realCallbacks[t]),delete e.callbacks[t],delete e.realCallbacks[t],e.realListenersCnt-=1))}}(a,t,o),a.realListenersCnt>0||(r.splice(i,1),n.splice(i,1))}}},92771:function(e,t){t.__esModule=!0,t.default=function(e,t){if(!e)return null;if(r.hasOwnProperty(e))return r[e];if("#"===e[0])return document.getElementById(e.slice(1));if(null===n)return null;var o=t;for(;o=o.parentElement;)if(o[n](e))return o||null;return null};var r={};"undefined"!==typeof document&&(r.body=document.body,r.window=window,r.document=document);var n=function(){if("undefined"!==typeof document&&document.body){var e=document.body;return"function"===typeof e.matches?"matches":"function"===typeof e.webkitMatchesSelector?"webkitMatchesSelector":"function"===typeof e.mozMatchesSelector?"mozMatchesSelector":"function"===typeof e.msMatchesSelector?"msMatchesSelector":"function"===typeof e.oMatchesSelector?"oMatchesSelector":null}return null}();e.exports=t.default},81738:function(e,t){t.__esModule=!0,t.default=function(e){do{var t=window.getComputedStyle(e);if("none"!==t.transform||"none"!==t.webkitTransform)return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null},e.exports=t.default},61596:function(e,t){t.__esModule=!0,t.getRect=function(e){if(e&&"function"===typeof e.getBoundingClientRect)return e.getBoundingClientRect();if(e===window||e===document)return{top:0,left:0,bottom:window.innerHeight,height:window.innerHeight,width:window.innerWidth,right:window.innerWidth};return{top:0,left:0,right:0,bottom:0,width:0,height:0}},t.isIntersecting=function(e,t,r,n){var o=e.top+r,i=e.bottom+n;return o>=t.top&&o<=t.bottom||i>=t.top&&i<=t.bottom||i>=t.bottom&&o<=t.top},t.infiniteRect=void 0;var r={top:-1/0,bottom:1/0,height:1/0,left:-1/0,right:1/0,width:1/0};t.infiniteRect=r},75198:function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}t.ZP=void 0,n(r(13854)).default;var o=n(r(59162)).default;t.ZP=o},13854:function(e,t,r){t.__esModule=!0,t.default=void 0;var n=r(67294),o=r(22442),i=c(r(92771)),a=c(r(81738)),s=r(61596);function c(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var d=function(e,t){var r=t.bottomOffset,n=t.hideOnBoundaryHit,o=e.top,i=e.height,a=e.width,s=e.boundaryBottom;return n||o+i+r<s?{top:o+"px",width:a+"px",position:"fixed"}:!n&&s>0?{top:s-i-r+"px",width:a+"px",position:"fixed"}:{width:a+"px",bottom:r+"px",position:"absolute"}},p=function(e,t){var r=t.bottomOffset,n=t.hideOnBoundaryHit,o=e.bottom,i=e.height,a=e.width,s=e.boundaryTop;return n||o-i-r>s?{width:a+"px",top:o-i+"px",position:"fixed"}:{width:a+"px",top:r+"px",position:"absolute"}},m=function(e,t,r){return("top"===e?d:p)(r,t)},f=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).holderEl=null,t.wrapperEl=null,t.el=null,t.scrollEl=null,t.boundaryEl=null,t.disabled=!1,t.checkPositionIntervalId=void 0,t.lastMinHeight=void 0,t.state={isFixed:!1,wrapperStyles:null,holderStyles:null,height:0},t.holderRef=function(e){e!==t.holderEl&&(t.holderEl=e)},t.wrapperRef=function(e){e!==t.wrapperEl&&(t.wrapperEl=e,t.updateScrollEl(),t.updateBoundaryEl())},t.checkPosition=function(){var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),r=e.holderEl,n=e.wrapperEl,o=e.boundaryEl,i=e.scrollEl,c=e.disabled;if(i&&r&&n){var u=t.props,d=u.mode,p=u.onFixedToggle,f=u.offsetTransforms,h=u.isIOSFixEnabled,b=u.dontUpdateHolderHeightWhenSticky;if(c)t.state.isFixed&&t.setState({isFixed:!1,wrapperStyles:{}});else if(r.getBoundingClientRect&&n.getBoundingClientRect){var y=r.getBoundingClientRect(),w=n.getBoundingClientRect(),g=o?(0,s.getRect)(o):s.infiniteRect,v=(0,s.getRect)(i),x=t.isFixed(y,w,g,v),k=null;if(f&&x){var O=(0,a.default)(i);O&&(k=(0,s.getRect)(O))}var I=t.state.isFixed&&b&&t.lastMinHeight?t.lastMinHeight:w.height;t.lastMinHeight=I;var C=h?{transform:"translateZ(0)",WebkitTransform:"translateZ(0)"}:null,S={isFixed:x,height:w.height,holderStyles:{minHeight:I+"px"},wrapperStyles:x?l({},C,m(d,t.props,{boundaryTop:"bottom"===d?g.top:0,boundaryBottom:"top"===d?g.bottom:0,top:"top"===d?v.top-(k?k.top:0):0,bottom:"bottom"===d?v.bottom-(k?k.bottom:0):0,width:y.width,height:w.height})):C};x!==t.state.isFixed&&p&&"function"===typeof p&&p(x),function(e,t){var r=e.wrapperStyles,n=t.wrapperStyles;if(e.isFixed!==t.isFixed||e.height!==t.height||!r&&n||r&&!n)return!1;if(!n)return!0;for(var o in r)if(r.hasOwnProperty(o)&&r[o]!==n[o])return!1;return!0}(t.state,S)||t.setState(S)}}else console.error("Missing required elements:",{scrollEl:i,holderEl:r,wrapperEl:n})},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,u(t,r);var c=n.prototype;return c.isFixed=function(e,t,r,n){var o=this.props,i=o.hideOnBoundaryHit,a=o.bottomOffset,c=o.topOffset,l=o.mode;if(this.disabled)return!1;if(i&&r&&!(0,s.isIntersecting)(r,n,c,a))return!1;var u=i?t.height+a:0;return"top"===l?e.top+c<n.top&&n.top+u<=r.bottom:e.bottom-c>n.bottom&&n.bottom-u>=r.top},c.updateScrollEl=function(){if(this.wrapperEl){this.scrollEl&&((0,o.unlisten)(this.scrollEl,["scroll"],this.checkPosition),this.scrollEl=null);var e=this.props.scrollElement;this.scrollEl="string"===typeof e?(0,i.default)(e,this.wrapperEl):e,this.scrollEl?(0,o.listen)(this.scrollEl,["scroll"],this.checkPosition):console.error("Cannot find scrollElement "+("string"===typeof e?e:"unknown"))}},c.updateBoundaryEl=function(){if(this.wrapperEl){var e=this.props.boundaryElement;this.boundaryEl=(0,i.default)(e,this.wrapperEl),this.boundaryEl!==window&&this.boundaryEl!==document||(this.boundaryEl=null)}},c.initialize=function(){var e=this.props,t=e.positionRecheckInterval,r=e.disabled;this.disabled=r,(0,o.listen)(window,["scroll","resize","pageshow","load"],this.checkPosition),this.checkPosition(),t&&(this.checkPositionIntervalId=setInterval(this.checkPosition,t))},c.componentDidUpdate=function(e){var t=e.scrollElement,r=e.boundaryElement,n=e.disabled;t!==this.props.scrollElement&&this.updateScrollEl(),r!==this.props.boundaryElement&&this.updateBoundaryEl(),n!==this.props.disabled&&(this.disabled=this.props.disabled,this.checkPosition())},c.componentDidMount=function(){this.initialize(),null===this.wrapperEl&&console.error("Wrapper element is missing, please make sure that you have assigned refs correctly")},c.componentWillUnmount=function(){this.scrollEl&&(0,o.unlisten)(this.scrollEl,["scroll"],this.checkPosition),(0,o.unlisten)(window,["scroll","resize","pageshow","load"],this.checkPosition),this.boundaryEl=null,this.scrollEl=null,clearInterval(this.checkPositionIntervalId)},c.render=function(){var e=this.holderRef,t=this.wrapperRef,r=this.state,n=r.isFixed,o=r.wrapperStyles,i=r.holderStyles;return this.props.children({holderRef:e,wrapperRef:t,isFixed:n,wrapperStyles:o,holderStyles:i})},n}(n.Component);f.defaultProps={mode:"top",topOffset:0,bottomOffset:0,isIOSFixEnabled:!0,disabled:!1,onFixedToggle:null,boundaryElement:null,scrollElement:"window",dontUpdateHolderHeightWhenSticky:!1};var h=f;t.default=h,e.exports=t.default}}]);