let castSession=null;function initializeCastApi(){if(!window.chrome)return void alert("Chromecast is only available in the Chrome browser.");if(!chrome.cast||!chrome.cast.isAvailable)return void setTimeout(initializeCastApi,1e3);const e=new chrome.cast.SessionRequest(chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID),t=new chrome.cast.ApiConfig(e,sessionListener,receiverListener);chrome.cast.initialize(t,onInitSuccess,onInitError)}function sessionListener(e){castSession=e}function receiverListener(e){chrome.cast.ReceiverAvailability.AVAILABLE}function onInitSuccess(){}function onInitError(){}function timeConverter(e){var t=new Date(e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+a}function onTermsOfServiceToggle(e){e.checked?document.getElementById("payment_button").disabled=!1:document.getElementById("payment_button").disabled=!0}function toggleVisibility(e){var t=document.getElementById(e);"none"===t.style.display?t.style.display="block":t.style.display="none"}function formatTime(e,t){var a=parseInt(e/60)%60,n=parseInt(e/3600)%24,o=e%60,r="";return t&&(r=(n<10?"0"+n:n)+":"),r+((a<10?"0"+a:a)+":")+(o<10?"0"+parseInt(o):parseInt(o))}function addTopMargin(){$(".topAdBanner").append("<br><br>")}function lrgNbFormatter(e){return e>999999?(e/1e6).toFixed(1)+"M":e>999?(e/1e3).toFixed(1)+"k":e}function getPlayer(e){return e?document.getElementById("audio"):document.getElementById("video")}function updatePlayPause(e){var t=getPlayer(e);t.paused||t.ended?document.getElementById("play-pause-button").className="fa fa-play-circle buttons":document.getElementById("play-pause-button").className="fa fa-pause-circle buttons"}function togglePlayPause(e){var t=getPlayer(e);t.paused||t.ended?(t.play(),document.getElementById("play-pause-button").className="fa fa-pause-circle buttons"):(t.pause(),document.getElementById("play-pause-button").className="fa fa-play-circle buttons")}function forward(e){getPlayer(e).currentTime+=30}function backward(e){getPlayer(e).currentTime-=15}function setVolume(e){var t=getPlayer(e),a=document.getElementById("volume-icon");t.volume=volumeSlider.value,0==t.volume?a.className="fa fa-volume-off buttons":a.className="fa fa-volume-up buttons"}function muteVolume(e){getPlayer(e).volume=0,document.getElementById("volume-slider").value=0}function maxVolume(e){getPlayer(e).volume=1,document.getElementById("volume-slider").value=1}function onVolumeIncrease(e){var t=getPlayer(e);t.volume<1&&(t.volume=Math.min(t.volume+.1,1),document.getElementById("volume-slider").value=t.volume)}function onVolumeDecrease(e){var t=getPlayer(e);t.volume>0&&(t.volume=Math.max(t.volume-.1,0),document.getElementById("volume-slider").value=t.volume)}function changeSpeed(e){var t=getPlayer(e);3==t.playbackRate?t.playbackRate=.5:t.playbackRate+=.25,document.getElementById("speed-control").innerText=t.playbackRate+"x"}function getProgressBar(){return document.getElementById("progressSlider")}function updateProgressBar(){var e=getPlayer(t),t=e.duration>3600,a=getProgressBar(),n=Math.floor(100/e.duration*e.currentTime);a.value=n,a.innerHTML=n+"% played",document.getElementById("elapsedTime").innerText=formatTime(e.currentTime,t),document.getElementById("remainingTime").innerText="-"+formatTime(e.duration-e.currentTime,t)}function updateProgressBar(e,t){var a=getPlayer(e),n=getProgressBar(),o=t/n.offsetWidth;a.currentTime=o*a.duration,n.value=o/100}function initPlayer(e,t,a,n){var o=getPlayer(e);o.addEventListener("play",(function(){document.getElementById("play-pause-button").className="fa fa-pause-circle buttons",onPlaybackStart(t,a)}),!1),o.addEventListener("pause",(function(){document.getElementById("play-pause-button").className="fa fa-play-circle buttons"}),!1),o.addEventListener("timeupdate",(function(){var e=o.duration>3600,t=getProgressBar(),a=Math.floor(100/o.duration*o.currentTime);t.value=a,t.innerHTML=a+"% played",document.getElementById("elapsedTime").innerText=formatTime(o.currentTime,e),document.getElementById("remainingTime").innerText="-"+formatTime(o.duration-o.currentTime,e)}),!1);var r=!1,s=getProgressBar();s.addEventListener("mousedown",(function(t){r=!0,updateProgressBar(e,t.offsetX)})),s.addEventListener("mouseup",(function(t){r&&(r=!1,updateProgressBar(e,t.offsetX))})),s.addEventListener("mousemove",(function(t){r&&updateProgressBar(e,t.offsetX)})),document.getElementById("speed-control").addEventListener("click",(function(t){changeSpeed(e)})),n>0&&(o.currentTime=n),s.addEventListener("mousemove",(function(t){r&&updateProgressBar(e,t.offsetX)})),o.addEventListener("ended",(function(){onPlaybackFinished(t,a)}));var u=document.getElementById("volume-slider");u.value=o.volume,u.addEventListener("input",(function(){o.volume=u.value}))}function warning(e){return alert(e),!1}function enableAutoplay(e){getPlayer(e).autoplay=!0}function disableAutoplay(e){getPlayer(e).autoplay=!1}function setLanguage(e,t){$.ajax({url:e,method:"POST",data:{language:t},success:function(){location.reload()}})}function setLanguage(e){const t=new URL(window.location.href);t.searchParams.delete("lang"),t.searchParams.set("lang",e),window.location.href=t.toString()}async function copyTopClipBoard(e,t,a,n,o){const r=document.getElementById(t);try{await navigator.clipboard.writeText(e),r.innerHTML='<i class="fa fa-check"></i> '+n,setTimeout((()=>{r.innerHTML='<i class="fa fa-copy"></i> '+a}),2500)}catch(e){console.error(o,e)}}function removeElementById(e){const t=document.getElementById(e);t&&t.parentNode.removeChild(t)}function refreshNewAds(){const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){e.target.querySelector(".adsbygoogle").hasAttribute("data-adsbygoogle-status")||(adsbygoogle=window.adsbygoogle||[]).push({}),t.unobserve(e.target)}}))}));document.querySelectorAll(".ad-container:not([data-observed])").forEach((t=>{e.observe(t),t.setAttribute("data-observed","true")}))}function savePlaybackStartedStatus(e){localStorage.setItem("playbackStarted-"+e,"true")}function hasPlaybackStarted(e){return null!==localStorage.getItem("playbackStarted-"+e)}function onPlaybackStart(e,t){hasPlaybackStarted(e)||$.ajax({url:"/class/ajax/update_episodes_stats.php",type:"POST",data:{csrf_token:t,episodeId:e,streaming:!0},success:function(t){savePlaybackStartedStatus(e)},error:function(){console.error("Error updating Episode playback started status")}})}function savePlayedStatus(e){localStorage.setItem("played-"+e,"true")}function hasBeenPlayed(e){return null!==localStorage.getItem("played-"+e)}function onPlaybackFinished(e,t){hasPlaybackStarted(e)&&!hasBeenPlayed(e)&&$.ajax({url:"/class/ajax/update_episodes_stats.php",type:"POST",data:{csrf_token:t,episodeId:e,fullyListenedTo:!0},success:function(t){savePlayedStatus(e)},error:function(){console.error("Error updating Episode played status")}})}function saveDownloadedStatus(e){localStorage.setItem("downloaded-"+e,"true")}function hasBeenDownloaded(e){return null!==localStorage.getItem("downloaded-"+e)}function onDownload(e,t){hasBeenDownloaded(e)||$.ajax({url:"/class/ajax/update_episodes_stats.php",type:"POST",data:{csrf_token:t,episodeId:e,download:!0},success:function(t){saveDownloadedStatus(e)},error:function(){console.error("Error updating Episode download stats")}})}function onRealDownload(e,t,a,n){fetch(t,{mode:"no-cors"}).then((e=>e.blob())).then((e=>{const t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=a,t.style.display="none",document.body.appendChild(t),t.click(),setTimeout((()=>{document.body.removeChild(t),URL.revokeObjectURL(t.href)}),100)})),hasBeenDownloaded(e)||$.ajax({url:"/class/ajax/update_episodes_stats.php",type:"POST",data:{csrf_token:n,episodeId:e,download:!0},success:function(t){saveDownloadedStatus(e)},error:function(){console.error("Error updating Episode download stats")}})}